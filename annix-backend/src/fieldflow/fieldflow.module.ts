import { Module } from "@nestjs/common";
import { ScheduleModule } from "@nestjs/schedule";
import { TypeOrmModule } from "@nestjs/typeorm";
import { AdminModule } from "../admin/admin.module";
import { EmailModule } from "../email/email.module";
import { User } from "../user/entities/user.entity";
import { AnnixRepAuthModule } from "./auth";
import {
  AnalyticsController,
  CalendarController,
  CrmController,
  CustomFieldController,
  GoalsController,
  MeetingController,
  ProspectController,
  RecordingController,
  RouteController,
  SummaryController,
  TranscriptController,
  VisitController,
} from "./controllers";
import {
  CalendarConnection,
  CalendarEvent,
  CrmConfig,
  CrmSyncLog,
  CustomFieldDefinition,
  Meeting,
  MeetingRecording,
  MeetingTranscript,
  Prospect,
  ProspectActivity,
  SalesGoal,
  Visit,
} from "./entities";
import {
  CaldavCalendarProvider,
  GoogleCalendarProvider,
  HubSpotOAuthProvider,
  OutlookCalendarProvider,
  PipedriveOAuthProvider,
  SalesforceOAuthProvider,
} from "./providers";
import { RepProfileModule } from "./rep-profile";
import {
  AnalyticsService,
  CalendarService,
  CalendarSyncService,
  CrmService,
  CrmSyncService,
  CustomFieldService,
  FollowUpReminderService,
  GoalsService,
  MeetingService,
  MeetingSummaryService,
  ProspectActivityService,
  ProspectService,
  RecordingService,
  RoutePlanningService,
  SpeakerDiarizationService,
  TranscriptionService,
  VisitService,
} from "./services";

@Module({
  imports: [
    TypeOrmModule.forFeature([
      Prospect,
      ProspectActivity,
      CustomFieldDefinition,
      Visit,
      Meeting,
      MeetingRecording,
      MeetingTranscript,
      CalendarConnection,
      CalendarEvent,
      CrmConfig,
      CrmSyncLog,
      SalesGoal,
      User,
    ]),
    ScheduleModule.forRoot(),
    AdminModule,
    EmailModule,
    RepProfileModule,
    AnnixRepAuthModule,
  ],
  controllers: [
    AnalyticsController,
    GoalsController,
    ProspectController,
    CustomFieldController,
    VisitController,
    MeetingController,
    CalendarController,
    RecordingController,
    TranscriptController,
    SummaryController,
    CrmController,
    RouteController,
  ],
  providers: [
    AnalyticsService,
    FollowUpReminderService,
    GoalsService,
    ProspectActivityService,
    ProspectService,
    CustomFieldService,
    VisitService,
    MeetingService,
    CalendarService,
    CalendarSyncService,
    RecordingService,
    SpeakerDiarizationService,
    TranscriptionService,
    MeetingSummaryService,
    CrmService,
    CrmSyncService,
    RoutePlanningService,
    GoogleCalendarProvider,
    OutlookCalendarProvider,
    CaldavCalendarProvider,
    SalesforceOAuthProvider,
    HubSpotOAuthProvider,
    PipedriveOAuthProvider,
  ],
  exports: [
    ProspectService,
    VisitService,
    MeetingService,
    CalendarService,
    RecordingService,
    TranscriptionService,
    MeetingSummaryService,
    CrmService,
    RepProfileModule,
    AnnixRepAuthModule,
  ],
})
export class AnnixRepModule {}
