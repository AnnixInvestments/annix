import { MigrationInterface, QueryRunner } from "typeorm";

export class AddPriority2SabsAndMaterialData1777000000000 implements MigrationInterface {
  name = "AddPriority2SabsAndMaterialData1777000000000";

  public async up(queryRunner: QueryRunner): Promise<void> {
    console.warn("Adding Priority 2 SABS and material data from MPS manual...");

    await this.createSabs719ExpansionPieceTable(queryRunner);
    await this.populateSabs719ExpansionPieces(queryRunner);
    await this.createAstmMaterialCompositionTable(queryRunner);
    await this.populateAstmMaterialCompositions(queryRunner);

    console.warn("Priority 2 data migration complete.");
  }

  private async createSabs719ExpansionPieceTable(queryRunner: QueryRunner): Promise<void> {
    console.warn("Creating SABS 719 expansion piece table...");

    await queryRunner.query(`
      CREATE TABLE IF NOT EXISTS sabs719_expansion_pieces (
        id SERIAL PRIMARY KEY,
        expansion_type VARCHAR(20) NOT NULL,
        nominal_bore_mm INT NOT NULL,
        dimension_a_mm DECIMAL(8,2) NOT NULL,
        dimension_b_mm DECIMAL(8,2) NOT NULL,
        dimension_c_mm DECIMAL(8,2) NOT NULL,
        dimension_d_mm DECIMAL(8,2) NOT NULL,
        flange_outside_dia_mm DECIMAL(8,2) NOT NULL,
        pitch_circle_dia_mm DECIMAL(8,2),
        flange_thickness_mm DECIMAL(6,2) NOT NULL,
        holes_count INT NOT NULL,
        hole_diameter_mm DECIMAL(6,2) NOT NULL,
        bolt_size VARCHAR(20) NOT NULL,
        bolt_length_mm INT NOT NULL,
        working_pressure_kpa INT DEFAULT 1600,
        min_length_mm INT,
        max_length_mm INT,
        UNIQUE(expansion_type, nominal_bore_mm)
      )
    `);
  }

  private async populateSabs719ExpansionPieces(queryRunner: QueryRunner): Promise<void> {
    console.warn("Populating SABS 719 expansion pieces from MPS manual pages 35-36...");

    const singleExpansionData = [
      {
        nb: 200,
        a: 213,
        b: 238,
        c: 244,
        d: 219,
        flangeOd: 334,
        pcd: 302,
        t: 16,
        holes: 6,
        holeDia: 15,
        boltSize: "M12",
        boltLen: 140,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 250,
        a: 263,
        b: 288,
        c: 294,
        d: 269,
        flangeOd: 402,
        pcd: 351,
        t: 16,
        holes: 6,
        holeDia: 15,
        boltSize: "M12",
        boltLen: 140,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 300,
        a: 313,
        b: 338,
        c: 344,
        d: 319,
        flangeOd: 452,
        pcd: 401,
        t: 16,
        holes: 6,
        holeDia: 19,
        boltSize: "M16",
        boltLen: 140,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 350,
        a: 346,
        b: 371,
        c: 377,
        d: 352,
        flangeOd: 504,
        pcd: 447,
        t: 20,
        holes: 6,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 400,
        a: 400,
        b: 425,
        c: 431,
        d: 406,
        flangeOd: 558,
        pcd: 501,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 450,
        a: 450,
        b: 475,
        c: 481,
        d: 456,
        flangeOd: 621,
        pcd: 564,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 500,
        a: 502,
        b: 527,
        c: 533,
        d: 508,
        flangeOd: 686,
        pcd: 622,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 550,
        a: 552,
        b: 577,
        c: 583,
        d: 558,
        flangeOd: 742,
        pcd: 678,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 600,
        a: 604,
        b: 629,
        c: 635,
        d: 610,
        flangeOd: 801,
        pcd: 737,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 650,
        a: 654,
        b: 679,
        c: 685,
        d: 660,
        flangeOd: 857,
        pcd: 793,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 700,
        a: 705,
        b: 730,
        c: 736,
        d: 711,
        flangeOd: 927,
        pcd: 857,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 750,
        a: 756,
        b: 781,
        c: 787,
        d: 762,
        flangeOd: 978,
        pcd: 908,
        t: 22,
        holes: 10,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 800,
        a: 806,
        b: 831,
        c: 836,
        d: 812,
        flangeOd: 1037,
        pcd: 961,
        t: 22,
        holes: 10,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 850,
        a: 857,
        b: 882,
        c: 888,
        d: 863,
        flangeOd: 1095,
        pcd: 1019,
        t: 22,
        holes: 10,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
      {
        nb: 900,
        a: 908,
        b: 938,
        c: 939,
        d: 914,
        flangeOd: 1149,
        pcd: 1067,
        t: 22,
        holes: 10,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 550,
        maxLen: 700,
      },
    ];

    for (const e of singleExpansionData) {
      await queryRunner.query(`
        INSERT INTO sabs719_expansion_pieces
          (expansion_type, nominal_bore_mm, dimension_a_mm, dimension_b_mm, dimension_c_mm, dimension_d_mm,
           flange_outside_dia_mm, pitch_circle_dia_mm, flange_thickness_mm, holes_count, hole_diameter_mm,
           bolt_size, bolt_length_mm, min_length_mm, max_length_mm)
        VALUES
          ('SINGLE', ${e.nb}, ${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.flangeOd}, ${e.pcd}, ${e.t}, ${e.holes}, ${e.holeDia},
           '${e.boltSize}', ${e.boltLen}, ${e.minLen}, ${e.maxLen})
        ON CONFLICT (expansion_type, nominal_bore_mm) DO NOTHING
      `);
    }

    const doubleExpansionData = [
      {
        nb: 200,
        a: 213,
        b: 238,
        c: 244,
        d: 406,
        flangeOd: 334,
        pcd: 302,
        t: 16,
        holes: 6,
        holeDia: 18,
        boltSize: "M12",
        boltLen: 140,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 250,
        a: 263,
        b: 288,
        c: 294,
        d: 456,
        flangeOd: 403,
        pcd: 352,
        t: 16,
        holes: 6,
        holeDia: 19,
        boltSize: "M16",
        boltLen: 140,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 300,
        a: 313,
        b: 338,
        c: 344,
        d: 506,
        flangeOd: 453,
        pcd: 401,
        t: 16,
        holes: 6,
        holeDia: 19,
        boltSize: "M16",
        boltLen: 140,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 350,
        a: 346,
        b: 371,
        c: 377,
        d: 539,
        flangeOd: 505,
        pcd: 442,
        t: 20,
        holes: 6,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 400,
        a: 400,
        b: 425,
        c: 431,
        d: 593,
        flangeOd: 559,
        pcd: 502,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 450,
        a: 450,
        b: 475,
        c: 481,
        d: 643,
        flangeOd: 622,
        pcd: 565,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 500,
        a: 502,
        b: 527,
        c: 533,
        d: 695,
        flangeOd: 686,
        pcd: 622,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 550,
        a: 552,
        b: 577,
        c: 583,
        d: 745,
        flangeOd: 743,
        pcd: 679,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 600,
        a: 604,
        b: 629,
        c: 635,
        d: 757,
        flangeOd: 807,
        pcd: 737,
        t: 20,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 650,
        a: 654,
        b: 679,
        c: 685,
        d: 847,
        flangeOd: 848,
        pcd: 784,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 700,
        a: 705,
        b: 730,
        c: 756,
        d: 898,
        flangeOd: 911,
        pcd: 841,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 750,
        a: 756,
        b: 781,
        c: 787,
        d: 949,
        flangeOd: 975,
        pcd: 905,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 800,
        a: 806,
        b: 831,
        c: 836,
        d: 998,
        flangeOd: 1038,
        pcd: 967,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 850,
        a: 857,
        b: 882,
        c: 888,
        d: 1050,
        flangeOd: 1095,
        pcd: 1019,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
      {
        nb: 900,
        a: 908,
        b: 933,
        c: 939,
        d: 1101,
        flangeOd: 1150,
        pcd: 1067,
        t: 22,
        holes: 8,
        holeDia: 24,
        boltSize: "M20",
        boltLen: 150,
        minLen: 1200,
        maxLen: 1500,
      },
    ];

    for (const e of doubleExpansionData) {
      await queryRunner.query(`
        INSERT INTO sabs719_expansion_pieces
          (expansion_type, nominal_bore_mm, dimension_a_mm, dimension_b_mm, dimension_c_mm, dimension_d_mm,
           flange_outside_dia_mm, pitch_circle_dia_mm, flange_thickness_mm, holes_count, hole_diameter_mm,
           bolt_size, bolt_length_mm, min_length_mm, max_length_mm)
        VALUES
          ('DOUBLE', ${e.nb}, ${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.flangeOd}, ${e.pcd}, ${e.t}, ${e.holes}, ${e.holeDia},
           '${e.boltSize}', ${e.boltLen}, ${e.minLen}, ${e.maxLen})
        ON CONFLICT (expansion_type, nominal_bore_mm) DO NOTHING
      `);
    }

    console.warn("SABS 719 expansion pieces populated.");
  }

  private async createAstmMaterialCompositionTable(queryRunner: QueryRunner): Promise<void> {
    console.warn("Creating ASTM material composition table...");

    await queryRunner.query(`
      CREATE TABLE IF NOT EXISTS astm_material_compositions (
        id SERIAL PRIMARY KEY,
        material_type VARCHAR(50) NOT NULL,
        standard_code VARCHAR(50) NOT NULL,
        product_form VARCHAR(50) NOT NULL,
        carbon_pct VARCHAR(20),
        manganese_pct VARCHAR(20),
        phosphorus_pct VARCHAR(20),
        sulphur_pct VARCHAR(20),
        silicon_pct VARCHAR(20),
        chromium_pct VARCHAR(20),
        nickel_pct VARCHAR(20),
        molybdenum_pct VARCHAR(20),
        tensile_strength_mpa INT,
        yield_strength_mpa INT,
        notes VARCHAR(255),
        UNIQUE(standard_code, product_form)
      )
    `);
  }

  private async populateAstmMaterialCompositions(queryRunner: QueryRunner): Promise<void> {
    console.warn("Populating ASTM material compositions from MPS manual pages 14-15...");

    const materialData = [
      {
        type: "Carbon Steel",
        std: "API 5L B",
        form: "Line Pipe",
        c: "0.27 max",
        mn: "1.15 max",
        p: "0.040",
        s: "0.050",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 241,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "API 5L X42",
        form: "Line Pipe",
        c: "0.29 max",
        mn: "1.25 max",
        p: "0.040",
        s: "0.050",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 290,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "API 5L X52",
        form: "Line Pipe",
        c: "0.31 max",
        mn: "1.35 max",
        p: "0.040",
        s: "0.050",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 455,
        ys: 359,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "API 5L X60",
        form: "Line Pipe",
        c: "0.26 max",
        mn: "1.35 max",
        p: "0.040",
        s: "0.050",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 517,
        ys: 414,
        notes: "Cb 0.005% min, V 0.02% min, Ti 0.03% min",
      },
      {
        type: "Carbon Steel",
        std: "A106 A",
        form: "Pipe",
        c: "0.25 max",
        mn: "0.27-0.93",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 331,
        ys: 207,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A234 WPA",
        form: "Fittings",
        c: "0.25 max",
        mn: "0.27-0.93",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 331,
        ys: 207,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A106 B",
        form: "Pipe",
        c: "0.30 max",
        mn: "0.29-1.06",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 241,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A234 WPB",
        form: "Fittings",
        c: "0.30 max",
        mn: "0.29-1.06",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 241,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A106 C",
        form: "Pipe",
        c: "0.35 max",
        mn: "0.29-1.06",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A234 WPC",
        form: "Fittings",
        c: "0.35 max",
        mn: "0.29-1.06",
        p: "0.048",
        s: "0.058",
        si: "0.10 min",
        cr: null,
        ni: null,
        mo: null,
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A105 I",
        form: "Flanges",
        c: "0.35 max",
        mn: "0.90 max",
        p: "0.050",
        s: "0.050",
        si: "0.35 max",
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A105 II",
        form: "Flanges",
        c: "0.35 max",
        mn: "0.90 max",
        p: "0.050",
        s: "0.050",
        si: "0.35 max",
        cr: null,
        ni: null,
        mo: null,
        ts: 482,
        ys: 248,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A181 I",
        form: "Flanges",
        c: "0.35 max",
        mn: "0.90 max",
        p: "0.050",
        s: "0.050",
        si: "0.35 max",
        cr: null,
        ni: null,
        mo: null,
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "Carbon Steel",
        std: "A181 II",
        form: "Flanges",
        c: "0.35 max",
        mn: "0.90 max",
        p: "0.050",
        s: "0.050",
        si: "0.35 max",
        cr: null,
        ni: null,
        mo: null,
        ts: 482,
        ys: 248,
        notes: null,
      },
      {
        type: "Killed Carbon Steel",
        std: "A350 LF1",
        form: "Flanges",
        c: "0.30 max",
        mn: "1.06 max",
        p: "0.040",
        s: "0.050",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 414,
        ys: 207,
        notes: "Impact tested for low-temperature",
      },
      {
        type: "Killed Carbon Steel",
        std: "A333 Gr.1",
        form: "Pipe",
        c: "0.30 max",
        mn: "0.40-1.06",
        p: "0.050",
        s: "0.060",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 379,
        ys: 207,
        notes: "Impact tested for low-temperature",
      },
      {
        type: "Killed Carbon Steel",
        std: "A420 WPL1",
        form: "Fittings",
        c: "0.30 max",
        mn: "0.40-1.06",
        p: "0.050",
        s: "0.060",
        si: null,
        cr: null,
        ni: null,
        mo: null,
        ts: 379,
        ys: 207,
        notes: "Impact tested for low-temperature",
      },
      {
        type: "3.5% Nickel Steel",
        std: "A350 LF3",
        form: "Flanges",
        c: "0.20 max",
        mn: "0.90 max",
        p: "0.040",
        s: "0.040",
        si: "0.15-0.35",
        cr: null,
        ni: "3.25-3.75",
        mo: null,
        ts: 482,
        ys: 276,
        notes: "Impact tested for low-temperature",
      },
      {
        type: "3.5% Nickel Steel",
        std: "A333 Gr.3",
        form: "Pipe",
        c: "0.19 max",
        mn: "0.31-0.64",
        p: "0.050",
        s: "0.050",
        si: "0.18-0.37",
        cr: null,
        ni: "3.18-3.82",
        mo: null,
        ts: 448,
        ys: 241,
        notes: null,
      },
      {
        type: "3.5% Nickel Steel",
        std: "A420 WPL3",
        form: "Fittings",
        c: "0.19 max",
        mn: "0.31-0.64",
        p: "0.050",
        s: "0.050",
        si: "0.18-0.37",
        cr: null,
        ni: "3.18-3.82",
        mo: null,
        ts: 448,
        ys: 241,
        notes: null,
      },
      {
        type: "0.5% Mo",
        std: "A182 F1",
        form: "Flanges",
        c: "0.30 max",
        mn: "0.50-0.85",
        p: "0.045",
        s: "0.045",
        si: "0.15-0.35",
        cr: null,
        ni: null,
        mo: "0.44-0.65",
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "0.5% Mo",
        std: "A234 WP1",
        form: "Fittings",
        c: "0.10-0.20",
        mn: "0.30-0.80",
        p: "0.045",
        s: "0.045",
        si: "0.10-0.50",
        cr: null,
        ni: null,
        mo: "0.44-0.65",
        ts: 379,
        ys: 207,
        notes: null,
      },
      {
        type: "0.5% Mo",
        std: "A335 P1",
        form: "Pipe",
        c: "0.10-0.20",
        mn: "0.30-0.80",
        p: "0.045",
        s: "0.045",
        si: "0.10-0.50",
        cr: null,
        ni: null,
        mo: "0.44-0.65",
        ts: 379,
        ys: 207,
        notes: null,
      },
      {
        type: "1% Cr 0.5% Mo",
        std: "A182 F12",
        form: "Flanges",
        c: "0.10-0.20",
        mn: "0.30-0.80",
        p: "0.040",
        s: "0.040",
        si: "0.10-0.60",
        cr: "0.80-1.25",
        ni: null,
        mo: "0.44-0.65",
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "1% Cr 0.5% Mo",
        std: "A234 WP12",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.61",
        p: "0.045",
        s: "0.045",
        si: "0.50 max",
        cr: "0.80-1.25",
        ni: null,
        mo: "0.44-0.65",
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "1% Cr 0.5% Mo",
        std: "A335 P12",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.61",
        p: "0.045",
        s: "0.045",
        si: "0.50 max",
        cr: "0.80-1.25",
        ni: null,
        mo: "0.44-0.65",
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "1.25% Cr 0.5% Mo",
        std: "A182 F11",
        form: "Flanges",
        c: "0.10-0.20",
        mn: "0.30-0.80",
        p: "0.040",
        s: "0.040",
        si: "0.50-1.00",
        cr: "1.00-1.50",
        ni: null,
        mo: "0.44-0.65",
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "1.25% Cr 0.5% Mo",
        std: "A234 WP11",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "1.00-1.50",
        ni: null,
        mo: "0.44-0.65",
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "1.25% Cr 0.5% Mo",
        std: "A335 P11",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "1.00-1.50",
        ni: null,
        mo: "0.44-0.65",
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "2.25% Cr 1% Mo",
        std: "A182 F22",
        form: "Flanges",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.040",
        s: "0.040",
        si: "0.50 max",
        cr: "2.00-2.50",
        ni: null,
        mo: "0.87-1.13",
        ts: 483,
        ys: 276,
        notes: null,
      },
      {
        type: "2.25% Cr 1% Mo",
        std: "A234 WP22",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50 max",
        cr: "1.90-2.60",
        ni: null,
        mo: "0.87-1.13",
        ts: 352,
        ys: 207,
        notes: null,
      },
      {
        type: "2.25% Cr 1% Mo",
        std: "A335 P22",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50 max",
        cr: "1.90-2.60",
        ni: null,
        mo: "0.87-1.13",
        ts: 352,
        ys: 207,
        notes: null,
      },
      {
        type: "5% Cr 0.5% Mo",
        std: "A182 F5",
        form: "Flanges",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50 max",
        cr: "4.00-6.00",
        ni: null,
        mo: "0.44-0.65",
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "5% Cr 0.5% Mo",
        std: "A234 WP5",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50 max",
        cr: "4.00-6.00",
        ni: null,
        mo: "0.45-0.65",
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "5% Cr 0.5% Mo",
        std: "A335 P5",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50 max",
        cr: "4.00-6.00",
        ni: null,
        mo: "0.45-0.65",
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "7% Cr 0.5% Mo",
        std: "A182 F7",
        form: "Flanges",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "6.00-8.00",
        ni: null,
        mo: "0.44-0.65",
        ts: 552,
        ys: 248,
        notes: null,
      },
      {
        type: "7% Cr 0.5% Mo",
        std: "A234 WP7",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "6.00-8.00",
        ni: null,
        mo: "0.45-0.65",
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "7% Cr 0.5% Mo",
        std: "A335 P7",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "6.00-8.00",
        ni: null,
        mo: "0.45-0.65",
        ts: 414,
        ys: 207,
        notes: null,
      },
      {
        type: "9% Cr 1% Mo",
        std: "A182 F9",
        form: "Flanges",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.50-1.00",
        cr: "8.00-10.00",
        ni: null,
        mo: "0.90-1.10",
        ts: 690,
        ys: 483,
        notes: null,
      },
      {
        type: "9% Cr 1% Mo",
        std: "A234 WP9",
        form: "Fittings",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.25-1.00",
        cr: "8.00-10.00",
        ni: null,
        mo: "0.90-1.10",
        ts: 552,
        ys: 207,
        notes: null,
      },
      {
        type: "9% Cr 1% Mo",
        std: "A335 P9",
        form: "Pipe",
        c: "0.15 max",
        mn: "0.30-0.60",
        p: "0.030",
        s: "0.030",
        si: "0.25-1.00",
        cr: "8.00-10.00",
        ni: null,
        mo: "0.90-1.10",
        ts: 552,
        ys: 207,
        notes: null,
      },
    ];

    for (const m of materialData) {
      const siVal = m.si ? `'${m.si}'` : "NULL";
      const crVal = m.cr ? `'${m.cr}'` : "NULL";
      const niVal = m.ni ? `'${m.ni}'` : "NULL";
      const moVal = m.mo ? `'${m.mo}'` : "NULL";
      const notesVal = m.notes ? `'${m.notes.replace(/'/g, "''")}'` : "NULL";

      await queryRunner.query(`
        INSERT INTO astm_material_compositions
          (material_type, standard_code, product_form, carbon_pct, manganese_pct, phosphorus_pct, sulphur_pct,
           silicon_pct, chromium_pct, nickel_pct, molybdenum_pct, tensile_strength_mpa, yield_strength_mpa, notes)
        VALUES
          ('${m.type}', '${m.std}', '${m.form}', '${m.c}', '${m.mn}', '${m.p}', '${m.s}',
           ${siVal}, ${crVal}, ${niVal}, ${moVal}, ${m.ts}, ${m.ys}, ${notesVal})
        ON CONFLICT (standard_code, product_form) DO NOTHING
      `);
    }

    console.warn("ASTM material compositions populated.");
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    console.warn("Reverting Priority 2 data...");

    await queryRunner.query("DROP TABLE IF EXISTS astm_material_compositions");
    await queryRunner.query("DROP TABLE IF EXISTS sabs719_expansion_pieces");

    console.warn("Priority 2 data reverted.");
  }
}
