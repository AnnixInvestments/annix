import { MigrationInterface, QueryRunner } from "typeorm";

export class CreateRfqDrafts1767620558975 implements MigrationInterface {
    name = 'CreateRfqDrafts1767620558975'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "FK_d8a6b6d0a82086e9f9150a9e9dd"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "FK_ee07a21b00b3fd775d3b16da49b"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "FK_cdb1303cca0319445b043c6cd51"`);
        await queryRunner.query(`ALTER TABLE "bend_rfqs" DROP CONSTRAINT "FK_cd439a37b8b2bc118e33004885"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP CONSTRAINT "FK_rfq_documents_uploaded_by"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP CONSTRAINT "FK_rfq_documents_rfq"`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" DROP CONSTRAINT "FK_drawing_versions_uploaded_by"`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" DROP CONSTRAINT "FK_drawing_versions_drawing"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_drawing_comments_parent"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_drawing_comments_user"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_drawing_comments_drawing"`);
        await queryRunner.query(`ALTER TABLE "drawings" DROP CONSTRAINT "FK_drawings_uploaded_by"`);
        await queryRunner.query(`ALTER TABLE "drawings" DROP CONSTRAINT "FK_drawings_rfq"`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" DROP CONSTRAINT "FK_boq_line_items_boq"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_boqs_created_by"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_boqs_rfq"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_boqs_drawing"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_review_workflows_decided_by"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_review_workflows_assigned_reviewer"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_review_workflows_submitted_by"`);
        await queryRunner.query(`ALTER TABLE "supplier_device_bindings" DROP CONSTRAINT "FK_supplier_device_bindings_profile"`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" DROP CONSTRAINT "FK_supplier_login_attempts_profile"`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" DROP CONSTRAINT "FK_supplier_onboarding_reviewed_by"`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" DROP CONSTRAINT "FK_supplier_onboarding_supplier"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" DROP CONSTRAINT "FK_supplier_documents_reviewed_by"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" DROP CONSTRAINT "FK_supplier_documents_supplier"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP CONSTRAINT "FK_9131cff65b8cb36fc5ac3226dfc"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" DROP CONSTRAINT "FK_supplier_profiles_company"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" DROP CONSTRAINT "FK_supplier_profiles_user"`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" DROP CONSTRAINT "FK_supplier_sessions_profile"`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" DROP CONSTRAINT "structural_steel_sections_type_id_fkey"`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" DROP CONSTRAINT "FK_pvc_fitting_weights_type"`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" DROP CONSTRAINT "pipe_allowable_stresses_grade_id_fkey"`);
        await queryRunner.query(`ALTER TABLE "pipe_end_configurations" DROP CONSTRAINT "FK_pipe_end_configurations_weld_type"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" DROP CONSTRAINT "FK_sa_mines_commodity"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" DROP CONSTRAINT "FK_slurry_profiles_commodity"`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" DROP CONSTRAINT "FK_hdpe_fitting_weights_fitting_type"`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" DROP CONSTRAINT "FK_flange_pt_ratings_pressure_class"`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" DROP CONSTRAINT "FK_flange_bolting_standard"`);
        await queryRunner.query(`ALTER TABLE "customer_device_bindings" DROP CONSTRAINT "FK_customer_device_bindings_customer_profile"`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" DROP CONSTRAINT "FK_customer_onboarding_reviewed_by"`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" DROP CONSTRAINT "FK_customer_onboarding_customer"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" DROP CONSTRAINT "FK_customer_documents_reviewed_by"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" DROP CONSTRAINT "FK_customer_documents_customer"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" DROP CONSTRAINT "FK_customer_profiles_company"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" DROP CONSTRAINT "FK_customer_profiles_user"`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" DROP CONSTRAINT "FK_customer_sessions_profile"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_invitations_supplier"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_invitations_invited_by"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_invitations_company"`);
        await queryRunner.query(`ALTER TABLE "audit_logs" DROP CONSTRAINT "FK_audit_logs_performed_by"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP CONSTRAINT "fk_admin_session_user"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_preferred_suppliers_added_by"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_preferred_suppliers_supplier"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_preferred_suppliers_company"`);
        await queryRunner.query(`ALTER TABLE "coating_environments" DROP CONSTRAINT "FK_coating_env_standard"`);
        await queryRunner.query(`ALTER TABLE "coating_specifications" DROP CONSTRAINT "FK_coating_spec_env"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_rfq_documents_rfq_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_rfq_documents_created_at"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawing_versions_drawing_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawing_comments_drawing_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawing_comments_user_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawings_rfq_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawings_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_drawings_uploaded_by"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boq_line_items_boq_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boq_line_items_item_type"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boqs_drawing_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boqs_rfq_id"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boqs_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_boqs_created_by"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_review_workflows_entity"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_review_workflows_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_review_workflows_submitted_by"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_review_workflows_assigned_reviewer"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_review_workflows_is_active"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_login_attempts_email"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_login_attempts_profile"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_onboarding_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_documents_supplier"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_documents_type"`);
        await queryRunner.query(`DROP INDEX "public"."idx_supplier_capabilities_profile_id"`);
        await queryRunner.query(`DROP INDEX "public"."idx_supplier_capabilities_category"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_profiles_user"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_profiles_company"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_profiles_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_sessions_token"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_supplier_sessions_active"`);
        await queryRunner.query(`DROP INDEX "public"."idx_sections_type_id"`);
        await queryRunner.query(`DROP INDEX "public"."idx_sections_designation"`);
        await queryRunner.query(`DROP INDEX "public"."idx_labor_rates_code"`);
        await queryRunner.query(`DROP INDEX "public"."idx_labor_rates_active"`);
        await queryRunner.query(`DROP INDEX "public"."idx_fab_complexity_level"`);
        await queryRunner.query(`DROP INDEX "public"."idx_fab_operations_active"`);
        await queryRunner.query(`DROP INDEX "public"."idx_fab_operations_code"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs719_fitting_type"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs719_nominal_diameter"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs719_fitting_lookup"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs62_fitting_type"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs62_nominal_diameter"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sabs62_fitting_lookup"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_pvc_pipe_specs_dn"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_pvc_pipe_specs_pn"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sa_mines_province"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sa_mines_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_sa_mines_commodity"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_fitting_types_code"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_fitting_types_category"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_fitting_weights_nb"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_pipe_specifications_nb"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_pipe_specifications_sdr"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_hdpe_pipe_specifications_active"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_device_bindings_customer_profile"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_device_bindings_device_fingerprint"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_onboarding_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_onboarding_customer"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_documents_customer"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_documents_type"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_documents_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_profiles_role"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_profiles_email_verified"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_sessions_token"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_customer_sessions_profile_active"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_invitations_token"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_invitations_email_status"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_invitations_company"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_audit_logs_entity"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_audit_logs_timestamp"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_audit_logs_performed_by"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_audit_logs_action"`);
        await queryRunner.query(`DROP INDEX "public"."idx_admin_session_token"`);
        await queryRunner.query(`DROP INDEX "public"."idx_admin_session_user_id"`);
        await queryRunner.query(`DROP INDEX "public"."idx_admin_session_expires_at"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_preferred_suppliers_company"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_preferred_suppliers_active"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_bend_center_to_face_unique"`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" DROP CONSTRAINT "structural_steel_sections_type_id_designation_key"`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" DROP CONSTRAINT "pipe_allowable_stresses_grade_id_temperature_f_key"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP CONSTRAINT "pipe_schedule_walls_nps_schedule_key"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" DROP CONSTRAINT "UQ_pipe_schedules_nps_schedule"`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" DROP CONSTRAINT "UQ_material_stress_temp"`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" DROP CONSTRAINT "UQ_hdpe_fitting_weights"`);
        await queryRunner.query(`ALTER TABLE "hdpe_pipe_specifications" DROP CONSTRAINT "UQ_hdpe_pipe_nb_sdr"`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" DROP CONSTRAINT "UQ_flange_pt_ratings_class_material_temp"`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" DROP CONSTRAINT "UQ_flange_bolting_standard_class_nps"`);
        await queryRunner.query(`ALTER TABLE "coating_environments" DROP CONSTRAINT "UQ_coating_env_standard_category"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" RENAME COLUMN "added_by_id" TO "added_by"`);
        await queryRunner.query(`CREATE TABLE "rfq_drafts" ("id" SERIAL NOT NULL, "draft_number" character varying NOT NULL, "project_name" character varying, "current_step" integer NOT NULL DEFAULT '1', "form_data" jsonb NOT NULL, "global_specs" jsonb, "required_products" jsonb, "straight_pipe_entries" jsonb, "pending_documents" jsonb, "completion_percentage" integer NOT NULL DEFAULT '0', "converted_rfq_id" integer, "is_converted" boolean NOT NULL DEFAULT false, "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), "created_by_user_id" integer NOT NULL, CONSTRAINT "UQ_1e17ddc61b097b256f39a2ebd51" UNIQUE ("draft_number"), CONSTRAINT "PK_ffcf6198f1f386c501d578ec591" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TYPE "public"."customer_login_attempts_failure_reason_enum" AS ENUM('invalid_credentials', 'device_mismatch', 'account_suspended', 'account_pending', 'account_deactivated', 'too_many_attempts', 'email_not_verified')`);
        await queryRunner.query(`CREATE TABLE "customer_login_attempts" ("id" SERIAL NOT NULL, "customer_profile_id" integer, "email" character varying(255) NOT NULL, "success" boolean NOT NULL DEFAULT false, "failure_reason" "public"."customer_login_attempts_failure_reason_enum", "device_fingerprint" character varying(500), "ip_address" character varying(45) NOT NULL, "user_agent" text, "ip_mismatch_warning" boolean NOT NULL DEFAULT false, "attempt_time" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "PK_fea4404cd43ef8b61312178826b" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_f3376c4ecd3f9fcf45d5ba6478" ON "customer_login_attempts" ("email", "attempt_time") `);
        await queryRunner.query(`CREATE INDEX "IDX_5d40d7385a0134f48786697e22" ON "customer_login_attempts" ("customer_profile_id", "attempt_time") `);
        await queryRunner.query(`ALTER TABLE "steel_specifications" DROP COLUMN "density_kg_m3"`);
        await queryRunner.query(`ALTER TABLE "steel_specifications" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "steel_specifications" DROP COLUMN "grade_standard"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "nominal_outside_diameter_id"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "flange_standard_id"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "flange_pressure_class_id"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "created_at"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP COLUMN "created_at"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "created_at"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP COLUMN "invited_by_id"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP COLUMN "updated_at"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" ADD "bolt_length_rf" numeric(5,2)`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD "invited_by" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "FK_84197f8946daca8330b5d4e0e9d"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "schedule_number"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "schedule_number" character varying`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "pipe_end_configuration"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "pipe_end_configuration" character varying`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "individual_pipe_length" TYPE numeric(8,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "length_unit" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "quantity_value" TYPE numeric(10,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "total_pipe_weight" TYPE numeric(12,2)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "calculated_total_length" TYPE numeric(10,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "rfq_item_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "UQ_84197f8946daca8330b5d4e0e9d" UNIQUE ("rfq_item_id")`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP CONSTRAINT "FK_ef8f022c5f4d9e27e47e03a1202"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD "description" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TYPE "public"."rfq_items_item_type_enum" RENAME TO "rfq_items_item_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."rfq_items_item_type_enum" AS ENUM('straight_pipe', 'bend', 'fitting', 'flange', 'custom')`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "item_type" TYPE "public"."rfq_items_item_type_enum" USING "item_type"::"text"::"public"."rfq_items_item_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."rfq_items_item_type_enum_old"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "total_weight_kg" TYPE numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "unit_price" TYPE numeric(15,2)`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "rfq_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "filename"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "filename" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "file_path"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "file_path" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "mime_type"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "mime_type" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ALTER COLUMN "rfq_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ALTER COLUMN "drawing_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ALTER COLUMN "uploaded_by_user_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."comment_type_enum" RENAME TO "comment_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."drawing_comments_comment_type_enum" AS ENUM('general', 'annotation', 'review_note', 'change_request', 'approval_note')`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" TYPE "public"."drawing_comments_comment_type_enum" USING "comment_type"::"text"::"public"."drawing_comments_comment_type_enum"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" SET DEFAULT 'general'`);
        await queryRunner.query(`DROP TYPE "public"."comment_type_enum_old"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "drawing_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "user_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."drawing_file_type_enum" RENAME TO "drawing_file_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."drawings_file_type_enum" AS ENUM('pdf', 'dwg', 'dxf', 'png', 'jpg', 'jpeg')`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "file_type" TYPE "public"."drawings_file_type_enum" USING "file_type"::"text"::"public"."drawings_file_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."drawing_file_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."drawing_status_enum" RENAME TO "drawing_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."drawings_status_enum" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" TYPE "public"."drawings_status_enum" USING "status"::"text"::"public"."drawings_status_enum"`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."drawing_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "uploaded_by_user_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."boq_item_type_enum" RENAME TO "boq_item_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."boq_line_items_item_type_enum" AS ENUM('straight_pipe', 'bend', 'fitting', 'flange', 'valve', 'support', 'coating', 'lining', 'custom')`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ALTER COLUMN "item_type" TYPE "public"."boq_line_items_item_type_enum" USING "item_type"::"text"::"public"."boq_line_items_item_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."boq_item_type_enum_old"`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ALTER COLUMN "boq_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."boq_status_enum" RENAME TO "boq_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."boqs_status_enum" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" TYPE "public"."boqs_status_enum" USING "status"::"text"::"public"."boqs_status_enum"`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."boq_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "created_by_user_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP CONSTRAINT "UQ_b19e346f96ffd54c4d436a95869"`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "rfq_number"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "rfq_number" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`UPDATE "rfqs" SET "rfq_number" = 'RFQ-' || LPAD(id::text, 6, '0') WHERE "rfq_number" = ''`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD CONSTRAINT "UQ_b19e346f96ffd54c4d436a95869" UNIQUE ("rfq_number")`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "project_name"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "project_name" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_name"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_name" character varying`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_email"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_email" character varying`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_phone"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_phone" character varying`);
        await queryRunner.query(`ALTER TYPE "public"."rfqs_status_enum" RENAME TO "rfqs_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."rfqs_status_enum" AS ENUM('draft', 'pending', 'quoted', 'accepted', 'rejected', 'cancelled')`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" TYPE "public"."rfqs_status_enum" USING "status"::"text"::"public"."rfqs_status_enum"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."rfqs_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "user" ALTER COLUMN "salt" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "user" ALTER COLUMN "status" SET NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."workflow_type_enum" RENAME TO "workflow_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."review_workflows_workflow_type_enum" AS ENUM('drawing_review', 'boq_review', 'rfq_review')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "workflow_type" TYPE "public"."review_workflows_workflow_type_enum" USING "workflow_type"::"text"::"public"."review_workflows_workflow_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."workflow_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."review_entity_type_enum" RENAME TO "review_entity_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."review_workflows_entity_type_enum" AS ENUM('drawing', 'boq', 'rfq')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "entity_type" TYPE "public"."review_workflows_entity_type_enum" USING "entity_type"::"text"::"public"."review_workflows_entity_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."review_entity_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."review_status_enum" RENAME TO "review_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."review_workflows_current_status_enum" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" TYPE "public"."review_workflows_current_status_enum" USING "current_status"::"text"::"public"."review_workflows_current_status_enum"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" SET DEFAULT 'draft'`);
        await queryRunner.query(`CREATE TYPE "public"."review_workflows_previous_status_enum" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "previous_status" TYPE "public"."review_workflows_previous_status_enum" USING "previous_status"::"text"::"public"."review_workflows_previous_status_enum"`);
        await queryRunner.query(`DROP TYPE "public"."review_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "submitted_by_user_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "supplier_companies" ALTER COLUMN "operational_regions" SET NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_login_failure_reason_enum" RENAME TO "supplier_login_failure_reason_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_login_attempts_failure_reason_enum" AS ENUM('invalid_credentials', 'device_mismatch', 'account_suspended', 'account_pending', 'account_deactivated', 'too_many_attempts', 'email_not_verified')`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" ALTER COLUMN "failure_reason" TYPE "public"."supplier_login_attempts_failure_reason_enum" USING "failure_reason"::"text"::"public"."supplier_login_attempts_failure_reason_enum"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_login_failure_reason_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_document_type_enum" RENAME TO "supplier_document_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_documents_document_type_enum" AS ENUM('registration_cert', 'vat_cert', 'tax_clearance', 'bee_cert', 'iso_cert', 'insurance', 'other')`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "document_type" TYPE "public"."supplier_documents_document_type_enum" USING "document_type"::"text"::"public"."supplier_documents_document_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_document_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_document_validation_status_enum" RENAME TO "supplier_document_validation_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_documents_validation_status_enum" AS ENUM('pending', 'valid', 'invalid', 'failed', 'manual_review')`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" TYPE "public"."supplier_documents_validation_status_enum" USING "validation_status"::"text"::"public"."supplier_documents_validation_status_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_document_validation_status_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_capabilities_product_category_enum" RENAME TO "supplier_capabilities_product_category_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_capabilities_product_category_enum" AS ENUM('straight_pipe', 'bends', 'flanges', 'fittings', 'valves', 'structural_steel', 'hdpe', 'pvc', 'fabrication', 'coating', 'inspection', 'other')`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "product_category" TYPE "public"."supplier_capabilities_product_category_enum" USING "product_category"::"text"::"public"."supplier_capabilities_product_category_enum"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_capabilities_product_category_enum_old"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP COLUMN "material_specializations"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_capabilities_material_specializations_enum" AS ENUM('carbon_steel', 'stainless_steel', 'alloy_steel', 'hdpe', 'pvc', 'rubber', 'other')`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD "material_specializations" "public"."supplier_capabilities_material_specializations_enum" array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP COLUMN "certifications"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_capabilities_certifications_enum" AS ENUM('iso_9001', 'iso_14001', 'iso_45001', 'asme', 'api', 'sabs', 'ce_marked', 'none')`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD "certifications" "public"."supplier_capabilities_certifications_enum" array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_account_status_enum" RENAME TO "supplier_account_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_profiles_account_status_enum" AS ENUM('pending', 'active', 'suspended', 'deactivated')`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" TYPE "public"."supplier_profiles_account_status_enum" USING "account_status"::"text"::"public"."supplier_profiles_account_status_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_account_status_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_session_invalidation_reason_enum" RENAME TO "supplier_session_invalidation_reason_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_sessions_invalidation_reason_enum" AS ENUM('logout', 'new_login', 'expired', 'admin_reset', 'device_reset', 'account_suspended')`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" ALTER COLUMN "invalidation_reason" TYPE "public"."supplier_sessions_invalidation_reason_enum" USING "invalidation_reason"::"text"::"public"."supplier_sessions_invalidation_reason_enum"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_session_invalidation_reason_enum_old"`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "display_order" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "grades" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "display_order" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "compatible_types" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "display_order" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "currency" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "labor_multiplier" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "labor_multiplier" SET DEFAULT '1'`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "display_order" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "stainless_multiplier" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "stainless_multiplier" SET DEFAULT '1.5'`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "display_order" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "is_active" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "updated_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."fitting_type" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."nominal_diameter_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."outside_diameter_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_a_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_b_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_c_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_d_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_e_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_f_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_x_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_y_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."thickness_t1_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."thickness_t2_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_h_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."radius_r_mm" IS NULL`);
        await queryRunner.query(`ALTER TABLE "sabs719_fitting_dimension" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "sabs719_fitting_dimension" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."fitting_type" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_b_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_b_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_d_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_d_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."angle_range" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."dimension_a_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."dimension_b_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."centre_to_face_c_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."centre_to_face_d_mm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."radius_r_mm" IS NULL`);
        await queryRunner.query(`ALTER TABLE "sabs62_fitting_dimension" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "sabs62_fitting_dimension" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_standards" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_standards" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_pipe_specifications" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_pipe_specifications" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_types" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_types" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_cement_prices" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pvc_cement_prices" ALTER COLUMN "updated_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP CONSTRAINT "pipe_steel_grades_code_key"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "code"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "code" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`UPDATE "pipe_steel_grades" SET "code" = 'GRADE-' || LPAD(id::text, 4, '0') WHERE "code" = ''`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD CONSTRAINT "UQ_b6799f7aed70897801673c40487" UNIQUE ("code")`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "name" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "category"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "category" character varying`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "equivalent_grade"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "equivalent_grade" character varying`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ALTER COLUMN "allowable_stress_ksi" TYPE numeric(6,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP COLUMN "nps"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD "nps" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP COLUMN "schedule"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD "schedule" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ALTER COLUMN "wall_thickness_inch" TYPE numeric(6,4)`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ALTER COLUMN "wall_thickness_mm" TYPE numeric(6,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" DROP CONSTRAINT "pipe_nps_od_nps_key"`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" DROP COLUMN "nps"`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ADD "nps" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`UPDATE "pipe_nps_od" SET "nps" = 'NPS-' || LPAD(id::text, 4, '0') WHERE "nps" = ''`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ADD CONSTRAINT "UQ_b49ee2390bf098a5ed94cbd3d2e" UNIQUE ("nps")`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ALTER COLUMN "od_inch" TYPE numeric(7,4)`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ALTER COLUMN "od_mm" TYPE numeric(7,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" ALTER COLUMN "standard_code" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" ALTER COLUMN "source_standard" SET NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."mine_type_enum" RENAME TO "mine_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."sa_mines_mine_type_enum" AS ENUM('Underground', 'Open Cast', 'Both')`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" TYPE "public"."sa_mines_mine_type_enum" USING "mine_type"::"text"::"public"."sa_mines_mine_type_enum"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" SET DEFAULT 'Underground'`);
        await queryRunner.query(`DROP TYPE "public"."mine_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."operational_status_enum" RENAME TO "operational_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."sa_mines_operational_status_enum" AS ENUM('Active', 'Care and Maintenance', 'Closed')`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" TYPE "public"."sa_mines_operational_status_enum" USING "operational_status"::"text"::"public"."sa_mines_operational_status_enum"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" SET DEFAULT 'Active'`);
        await queryRunner.query(`DROP TYPE "public"."operational_status_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."risk_level_enum" RENAME TO "risk_level_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."slurry_profiles_abrasion_risk_enum" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" TYPE "public"."slurry_profiles_abrasion_risk_enum" USING "abrasion_risk"::"text"::"public"."slurry_profiles_abrasion_risk_enum"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" SET DEFAULT 'Medium'`);
        await queryRunner.query(`CREATE TYPE "public"."slurry_profiles_corrosion_risk_enum" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" TYPE "public"."slurry_profiles_corrosion_risk_enum" USING "corrosion_risk"::"text"::"public"."slurry_profiles_corrosion_risk_enum"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" SET DEFAULT 'Medium'`);
        await queryRunner.query(`CREATE TYPE "public"."lining_coating_rules_abrasion_level_enum" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "lining_coating_rules" ALTER COLUMN "abrasion_level" TYPE "public"."lining_coating_rules_abrasion_level_enum" USING "abrasion_level"::"text"::"public"."lining_coating_rules_abrasion_level_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."lining_coating_rules_corrosion_level_enum" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "lining_coating_rules" ALTER COLUMN "corrosion_level" TYPE "public"."lining_coating_rules_corrosion_level_enum" USING "corrosion_level"::"text"::"public"."lining_coating_rules_corrosion_level_enum"`);
        await queryRunner.query(`DROP TYPE "public"."risk_level_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_document_type_enum" RENAME TO "customer_document_type_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_documents_document_type_enum" AS ENUM('registration_cert', 'tax_clearance', 'bee_cert', 'insurance', 'proof_of_address', 'other')`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "document_type" TYPE "public"."customer_documents_document_type_enum" USING "document_type"::"text"::"public"."customer_documents_document_type_enum"`);
        await queryRunner.query(`DROP TYPE "public"."customer_document_type_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_document_validation_status_enum" RENAME TO "customer_document_validation_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_documents_validation_status_enum" AS ENUM('pending', 'valid', 'invalid', 'failed', 'manual_review')`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" TYPE "public"."customer_documents_validation_status_enum" USING "validation_status"::"text"::"public"."customer_documents_validation_status_enum"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."customer_document_validation_status_enum_old"`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_extracted_data" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_processed_at" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_failed" IS NULL`);
        await queryRunner.query(`ALTER TYPE "public"."customer_role_enum" RENAME TO "customer_role_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_profiles_role_enum" AS ENUM('customer_admin', 'customer_standard')`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" TYPE "public"."customer_profiles_role_enum" USING "role"::"text"::"public"."customer_profiles_role_enum"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" SET DEFAULT 'customer_admin'`);
        await queryRunner.query(`DROP TYPE "public"."customer_role_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_account_status_enum" RENAME TO "customer_account_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_profiles_account_status_enum" AS ENUM('pending', 'active', 'suspended', 'deactivated')`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" TYPE "public"."customer_profiles_account_status_enum" USING "account_status"::"text"::"public"."customer_profiles_account_status_enum"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."customer_account_status_enum_old"`);
        await queryRunner.query(`ALTER TYPE "public"."session_invalidation_reason_enum" RENAME TO "session_invalidation_reason_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_sessions_invalidation_reason_enum" AS ENUM('logout', 'new_login', 'expired', 'admin_reset', 'device_reset', 'account_suspended')`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" ALTER COLUMN "invalidation_reason" TYPE "public"."customer_sessions_invalidation_reason_enum" USING "invalidation_reason"::"text"::"public"."customer_sessions_invalidation_reason_enum"`);
        await queryRunner.query(`DROP TYPE "public"."session_invalidation_reason_enum_old"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "supplier_invitations_token_key"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP COLUMN "token"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD "token" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "UQ_6e17329953ae78fccc11a73af34" UNIQUE ("token")`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_invitation_status_enum" RENAME TO "supplier_invitation_status_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_invitations_status_enum" AS ENUM('pending', 'accepted', 'expired', 'cancelled')`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" TYPE "public"."supplier_invitations_status_enum" USING "status"::"text"::"public"."supplier_invitations_status_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_invitation_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ALTER COLUMN "entity_id" DROP NOT NULL`);
        await queryRunner.query(`ALTER TYPE "public"."audit_action_enum" RENAME TO "audit_action_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."audit_logs_action_enum" AS ENUM('create', 'update', 'delete', 'upload', 'download', 'submit', 'approve', 'reject', 'request_changes', 'assign_reviewer', 'add_comment', 'resolve_comment', 'admin_login_success', 'admin_login_failed', 'admin_logout', 'user_created', 'user_updated', 'user_deactivated', 'user_reactivated')`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ALTER COLUMN "action" TYPE "public"."audit_logs_action_enum" USING "action"::"text"::"public"."audit_logs_action_enum"`);
        await queryRunner.query(`DROP TYPE "public"."audit_action_enum_old"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP CONSTRAINT "admin_sessions_session_token_key"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP COLUMN "session_token"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD "session_token" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD CONSTRAINT "UQ_217b3c792fd4140ae675a0c08df" UNIQUE ("session_token")`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP COLUMN "client_ip"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD "client_ip" character varying NOT NULL DEFAULT ''`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "is_revoked" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "created_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "created_at" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "last_active_at" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "last_active_at" SET DEFAULT now()`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."bendType" IS 'Bend type: 1.5D, 2D, 3D, or 5D'`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."nominalBoreMm" IS 'Nominal bore in millimeters'`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."degrees" IS 'Bend angle in degrees'`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."centerToFaceMm" IS 'Center to face dimension in millimeters'`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."radiusMm" IS 'Radius for the bend type in millimeters'`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."radians" IS 'Radian value for the angle'`);
        await queryRunner.query(`CREATE INDEX "IDX_9fda443afadeb493b9c31fc21a" ON "drawing_versions" ("drawing_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_3b406fd463b11bc339c22a708a" ON "drawing_comments" ("drawing_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_97b4e5b09effba0411e74326c2" ON "drawings" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_09d59890663bd495356c7aca8f" ON "boq_line_items" ("boq_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_529a7bd839594468268b1a1e0b" ON "boqs" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_2485f0b7997eb2e4a2f38cb091" ON "review_workflows" ("is_active") `);
        await queryRunner.query(`CREATE INDEX "IDX_bd02cb91c4afe32ab86d8f7c24" ON "review_workflows" ("current_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_35fe9978f874b7b5cf4bc974b7" ON "review_workflows" ("entity_type", "entity_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_106f793c2dbeb03955e528c25f" ON "supplier_login_attempts" ("email", "attempt_time") `);
        await queryRunner.query(`CREATE INDEX "IDX_3c48192c9a3210dbd4eeff9d34" ON "supplier_login_attempts" ("supplier_profile_id", "attempt_time") `);
        await queryRunner.query(`CREATE INDEX "IDX_bf7e0210018d49b7e813d1fd88" ON "supplier_sessions" ("supplier_profile_id", "is_active") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_de0e9585e58c43c8ac8bbb6b03" ON "supplier_sessions" ("session_token") `);
        await queryRunner.query(`CREATE INDEX "IDX_1451fe87b33e4cf8b4c19bbb3f" ON "sa_mines" ("operational_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_d7e78669f5aabbdf1770b49a2b" ON "sa_mines" ("province") `);
        await queryRunner.query(`CREATE INDEX "IDX_3a67cc81fa14717b64c74f21fa" ON "customer_sessions" ("customer_profile_id", "is_active") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_d544125bb1f9c5dcdbf7e30894" ON "customer_sessions" ("session_token") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_6e17329953ae78fccc11a73af3" ON "supplier_invitations" ("token") `);
        await queryRunner.query(`CREATE INDEX "IDX_88dcc148d532384790ab874c3d" ON "audit_logs" ("timestamp") `);
        await queryRunner.query(`CREATE INDEX "IDX_7421efc125d95e413657efa3c6" ON "audit_logs" ("entity_type", "entity_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_e4517f63e95323dee0f04e7ba9" ON "customer_preferred_suppliers" ("customer_company_id", "supplier_profile_id") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_9bb55bf371d7c77d3432ec66b7" ON "bend_center_to_face" ("bendType", "nominalBoreMm", "degrees") `);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ADD CONSTRAINT "UQ_47ecbc85918dffdff35dcfe0424" UNIQUE ("grade_id", "temperature_f")`);
        await queryRunner.query(`UPDATE "pipe_schedule_walls" SET "nps" = 'NPS-' || LPAD(id::text, 4, '0'), "schedule" = 'SCH-' || LPAD(id::text, 4, '0') WHERE "nps" = '' OR "schedule" = ''`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD CONSTRAINT "UQ_5d924337abb650879272e44a874" UNIQUE ("nps", "schedule")`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" ADD CONSTRAINT "UQ_52d8e4047a95b71048c04b7b5bd" UNIQUE ("nps", "schedule")`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" ADD CONSTRAINT "UQ_bf643c1b31301f004b8d2a493b0" UNIQUE ("material_code", "temperature_celsius")`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" ADD CONSTRAINT "UQ_ca4121575540179cd4f658fc7e6" UNIQUE ("fitting_type_id", "nominal_bore")`);
        await queryRunner.query(`ALTER TABLE "hdpe_pipe_specifications" ADD CONSTRAINT "UQ_dae2168ed2a5436c5b611bfdc17" UNIQUE ("nominal_bore", "sdr")`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" ADD CONSTRAINT "UQ_d43ce47acaeb539fe33263e2e35" UNIQUE ("pressure_class_id", "material_group", "temperature_celsius")`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" ADD CONSTRAINT "UQ_a1af7ffa2934dec3fd3be3d448b" UNIQUE ("standard_id", "pressure_class", "nps")`);
        await queryRunner.query(`ALTER TABLE "coating_environments" ADD CONSTRAINT "UQ_8f3872250f91544b6de15c5fa67" UNIQUE ("standard_id", "category")`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "FK_84197f8946daca8330b5d4e0e9d" FOREIGN KEY ("rfq_item_id") REFERENCES "rfq_items"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "bend_rfqs" ADD CONSTRAINT "FK_cd439a37b8b2bc118e33004885b" FOREIGN KEY ("rfq_item_id") REFERENCES "rfq_items"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD CONSTRAINT "FK_ef8f022c5f4d9e27e47e03a1202" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD CONSTRAINT "FK_88e92280221c68dd82856048d8f" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD CONSTRAINT "FK_faf2ee3e63b295e69a85c414630" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ADD CONSTRAINT "FK_9fda443afadeb493b9c31fc21a9" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ADD CONSTRAINT "FK_c954fe2b5a364b5384c5e2b0f3d" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_3b406fd463b11bc339c22a708ad" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_7c611f9c1811719132395edd474" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_86b529724d98c9a5e3269ded7f3" FOREIGN KEY ("parent_comment_id") REFERENCES "drawing_comments"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawings" ADD CONSTRAINT "FK_130c147ddfa8fab907d4c36202f" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawings" ADD CONSTRAINT "FK_6783997eeeb14ebe5142c0a628e" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ADD CONSTRAINT "FK_09d59890663bd495356c7aca8f6" FOREIGN KEY ("boq_id") REFERENCES "boqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_7a42fa84540e56e12de19955545" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_249789437facc5a9018406fc360" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_2e84cbcb09dda547de643c0ae2f" FOREIGN KEY ("created_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_8397cd409023a2347257e28749b" FOREIGN KEY ("submitted_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_eada73d30595ba317e2dbd85aac" FOREIGN KEY ("assigned_reviewer_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_5b1eab4743aca6a05b3089452e0" FOREIGN KEY ("decided_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_device_bindings" ADD CONSTRAINT "FK_ae7bb93e09831db4b3c756c8829" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" ADD CONSTRAINT "FK_4ce20830fdc3cdbb144483cc7c6" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" ADD CONSTRAINT "FK_d1a7a1426d4e252cd79ca342cea" FOREIGN KEY ("supplier_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" ADD CONSTRAINT "FK_e6bd918c8d4f946429e975a7644" FOREIGN KEY ("reviewed_by") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ADD CONSTRAINT "FK_399a19b7cb4420b5816d6963f7f" FOREIGN KEY ("supplier_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ADD CONSTRAINT "FK_034afbefcc2af6b35dce4041c33" FOREIGN KEY ("reviewed_by") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD CONSTRAINT "FK_9131cff65b8cb36fc5ac3226dfc" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ADD CONSTRAINT "FK_d8f0b495dba71509b24110ef9ea" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ADD CONSTRAINT "FK_3621df36b1c2277d6c164c4e153" FOREIGN KEY ("company_id") REFERENCES "supplier_companies"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" ADD CONSTRAINT "FK_597e0d39e0e8f620f910769e41c" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ADD CONSTRAINT "FK_b4fd2d5a7703d294311585fc171" FOREIGN KEY ("type_id") REFERENCES "structural_steel_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_drafts" ADD CONSTRAINT "FK_281b6ce705dc724a9a223b482d3" FOREIGN KEY ("created_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ADD CONSTRAINT "FK_a49fa2729175d6ee657f1c7fd51" FOREIGN KEY ("fitting_type_id") REFERENCES "pvc_fitting_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ADD CONSTRAINT "FK_d8ed1b09c8aa0422eee65f1a3ab" FOREIGN KEY ("grade_id") REFERENCES "pipe_steel_grades"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pipe_end_configurations" ADD CONSTRAINT "FK_f96f854798bb758a904c06382b7" FOREIGN KEY ("weld_type_id") REFERENCES "weld_types"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ADD CONSTRAINT "FK_3d34195685137913859263824a2" FOREIGN KEY ("commodity_id") REFERENCES "commodities"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ADD CONSTRAINT "FK_33980360cf9dcb092f566979730" FOREIGN KEY ("commodity_id") REFERENCES "commodities"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" ADD CONSTRAINT "FK_4de8a1bf0cd1607dbf9102d6f62" FOREIGN KEY ("fitting_type_id") REFERENCES "hdpe_fitting_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" ADD CONSTRAINT "FK_3143f51ee3171c5823c55874e47" FOREIGN KEY ("pressure_class_id") REFERENCES "flange_pressure_classes"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" ADD CONSTRAINT "FK_4ec11ccd592377c2b8f52637472" FOREIGN KEY ("standard_id") REFERENCES "flange_standards"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_device_bindings" ADD CONSTRAINT "FK_638ebef67e036a36b5760c24a6f" FOREIGN KEY ("customer_profile_id") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_login_attempts" ADD CONSTRAINT "FK_d09de66079fdcbda2a510b1ccbf" FOREIGN KEY ("customer_profile_id") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" ADD CONSTRAINT "FK_b5d9f34bc39ef177fef897a5b8c" FOREIGN KEY ("customer_id") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" ADD CONSTRAINT "FK_eb20fc622f7e8e6a0277902febd" FOREIGN KEY ("reviewed_by_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ADD CONSTRAINT "FK_5301fb44d91d7a9102f12fba583" FOREIGN KEY ("customer_id") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ADD CONSTRAINT "FK_88d172489f3a15b2bdefca7e0a3" FOREIGN KEY ("reviewed_by_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ADD CONSTRAINT "FK_99617dd6d452ad43dd992a79933" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ADD CONSTRAINT "FK_7b67920821685542f5ad825dd2d" FOREIGN KEY ("company_id") REFERENCES "customer_companies"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" ADD CONSTRAINT "FK_636ee570a483798341baa1b6b21" FOREIGN KEY ("customer_profile_id") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_f7667ac9ad0ad1c632fcdafd759" FOREIGN KEY ("customer_company_id") REFERENCES "customer_companies"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_11d96fdc7654be772d3de7cf14a" FOREIGN KEY ("invited_by") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_86022f8a07f05d69d9bb4df5bb3" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ADD CONSTRAINT "FK_01bc6096ff0db511ac3df6e1e20" FOREIGN KEY ("performed_by_user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD CONSTRAINT "FK_71a5ecdb84e8f26a712f6c657e4" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_678eb6f3a964e19e3059ac7f5bd" FOREIGN KEY ("customer_company_id") REFERENCES "customer_companies"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_e96f63c25d28e6dab46a51a2c58" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_4c02245965b19ea9733a3da7ac4" FOREIGN KEY ("added_by") REFERENCES "customer_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coating_environments" ADD CONSTRAINT "FK_dd8cc4cc13f7b07b2562011a71c" FOREIGN KEY ("standard_id") REFERENCES "coating_standards"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coating_specifications" ADD CONSTRAINT "FK_05df815b7319eb1932ff921bca9" FOREIGN KEY ("environment_id") REFERENCES "coating_environments"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "coating_specifications" DROP CONSTRAINT "FK_05df815b7319eb1932ff921bca9"`);
        await queryRunner.query(`ALTER TABLE "coating_environments" DROP CONSTRAINT "FK_dd8cc4cc13f7b07b2562011a71c"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_4c02245965b19ea9733a3da7ac4"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_e96f63c25d28e6dab46a51a2c58"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" DROP CONSTRAINT "FK_678eb6f3a964e19e3059ac7f5bd"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP CONSTRAINT "FK_71a5ecdb84e8f26a712f6c657e4"`);
        await queryRunner.query(`ALTER TABLE "audit_logs" DROP CONSTRAINT "FK_01bc6096ff0db511ac3df6e1e20"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_86022f8a07f05d69d9bb4df5bb3"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_11d96fdc7654be772d3de7cf14a"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "FK_f7667ac9ad0ad1c632fcdafd759"`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" DROP CONSTRAINT "FK_636ee570a483798341baa1b6b21"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" DROP CONSTRAINT "FK_7b67920821685542f5ad825dd2d"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" DROP CONSTRAINT "FK_99617dd6d452ad43dd992a79933"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" DROP CONSTRAINT "FK_88d172489f3a15b2bdefca7e0a3"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" DROP CONSTRAINT "FK_5301fb44d91d7a9102f12fba583"`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" DROP CONSTRAINT "FK_eb20fc622f7e8e6a0277902febd"`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" DROP CONSTRAINT "FK_b5d9f34bc39ef177fef897a5b8c"`);
        await queryRunner.query(`ALTER TABLE "customer_login_attempts" DROP CONSTRAINT "FK_d09de66079fdcbda2a510b1ccbf"`);
        await queryRunner.query(`ALTER TABLE "customer_device_bindings" DROP CONSTRAINT "FK_638ebef67e036a36b5760c24a6f"`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" DROP CONSTRAINT "FK_4ec11ccd592377c2b8f52637472"`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" DROP CONSTRAINT "FK_3143f51ee3171c5823c55874e47"`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" DROP CONSTRAINT "FK_4de8a1bf0cd1607dbf9102d6f62"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" DROP CONSTRAINT "FK_33980360cf9dcb092f566979730"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" DROP CONSTRAINT "FK_3d34195685137913859263824a2"`);
        await queryRunner.query(`ALTER TABLE "pipe_end_configurations" DROP CONSTRAINT "FK_f96f854798bb758a904c06382b7"`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" DROP CONSTRAINT "FK_d8ed1b09c8aa0422eee65f1a3ab"`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" DROP CONSTRAINT "FK_a49fa2729175d6ee657f1c7fd51"`);
        await queryRunner.query(`ALTER TABLE "rfq_drafts" DROP CONSTRAINT "FK_281b6ce705dc724a9a223b482d3"`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" DROP CONSTRAINT "FK_b4fd2d5a7703d294311585fc171"`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" DROP CONSTRAINT "FK_597e0d39e0e8f620f910769e41c"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" DROP CONSTRAINT "FK_3621df36b1c2277d6c164c4e153"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" DROP CONSTRAINT "FK_d8f0b495dba71509b24110ef9ea"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP CONSTRAINT "FK_9131cff65b8cb36fc5ac3226dfc"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" DROP CONSTRAINT "FK_034afbefcc2af6b35dce4041c33"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" DROP CONSTRAINT "FK_399a19b7cb4420b5816d6963f7f"`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" DROP CONSTRAINT "FK_e6bd918c8d4f946429e975a7644"`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" DROP CONSTRAINT "FK_d1a7a1426d4e252cd79ca342cea"`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" DROP CONSTRAINT "FK_4ce20830fdc3cdbb144483cc7c6"`);
        await queryRunner.query(`ALTER TABLE "supplier_device_bindings" DROP CONSTRAINT "FK_ae7bb93e09831db4b3c756c8829"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_5b1eab4743aca6a05b3089452e0"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_eada73d30595ba317e2dbd85aac"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" DROP CONSTRAINT "FK_8397cd409023a2347257e28749b"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_2e84cbcb09dda547de643c0ae2f"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_249789437facc5a9018406fc360"`);
        await queryRunner.query(`ALTER TABLE "boqs" DROP CONSTRAINT "FK_7a42fa84540e56e12de19955545"`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" DROP CONSTRAINT "FK_09d59890663bd495356c7aca8f6"`);
        await queryRunner.query(`ALTER TABLE "drawings" DROP CONSTRAINT "FK_6783997eeeb14ebe5142c0a628e"`);
        await queryRunner.query(`ALTER TABLE "drawings" DROP CONSTRAINT "FK_130c147ddfa8fab907d4c36202f"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_86b529724d98c9a5e3269ded7f3"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_7c611f9c1811719132395edd474"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" DROP CONSTRAINT "FK_3b406fd463b11bc339c22a708ad"`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" DROP CONSTRAINT "FK_c954fe2b5a364b5384c5e2b0f3d"`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" DROP CONSTRAINT "FK_9fda443afadeb493b9c31fc21a9"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP CONSTRAINT "FK_faf2ee3e63b295e69a85c414630"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP CONSTRAINT "FK_88e92280221c68dd82856048d8f"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP CONSTRAINT "FK_ef8f022c5f4d9e27e47e03a1202"`);
        await queryRunner.query(`ALTER TABLE "bend_rfqs" DROP CONSTRAINT "FK_cd439a37b8b2bc118e33004885b"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "FK_84197f8946daca8330b5d4e0e9d"`);
        await queryRunner.query(`ALTER TABLE "coating_environments" DROP CONSTRAINT "UQ_8f3872250f91544b6de15c5fa67"`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" DROP CONSTRAINT "UQ_a1af7ffa2934dec3fd3be3d448b"`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" DROP CONSTRAINT "UQ_d43ce47acaeb539fe33263e2e35"`);
        await queryRunner.query(`ALTER TABLE "hdpe_pipe_specifications" DROP CONSTRAINT "UQ_dae2168ed2a5436c5b611bfdc17"`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" DROP CONSTRAINT "UQ_ca4121575540179cd4f658fc7e6"`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" DROP CONSTRAINT "UQ_bf643c1b31301f004b8d2a493b0"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" DROP CONSTRAINT "UQ_52d8e4047a95b71048c04b7b5bd"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP CONSTRAINT "UQ_5d924337abb650879272e44a874"`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" DROP CONSTRAINT "UQ_47ecbc85918dffdff35dcfe0424"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_9bb55bf371d7c77d3432ec66b7"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_e4517f63e95323dee0f04e7ba9"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7421efc125d95e413657efa3c6"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_88dcc148d532384790ab874c3d"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_6e17329953ae78fccc11a73af3"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d544125bb1f9c5dcdbf7e30894"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3a67cc81fa14717b64c74f21fa"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d7e78669f5aabbdf1770b49a2b"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_1451fe87b33e4cf8b4c19bbb3f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_de0e9585e58c43c8ac8bbb6b03"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_bf7e0210018d49b7e813d1fd88"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3c48192c9a3210dbd4eeff9d34"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_106f793c2dbeb03955e528c25f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_35fe9978f874b7b5cf4bc974b7"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_bd02cb91c4afe32ab86d8f7c24"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_2485f0b7997eb2e4a2f38cb091"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_529a7bd839594468268b1a1e0b"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_09d59890663bd495356c7aca8f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_97b4e5b09effba0411e74326c2"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_3b406fd463b11bc339c22a708a"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_9fda443afadeb493b9c31fc21a"`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."radians" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."radiusMm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."centerToFaceMm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."degrees" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."nominalBoreMm" IS NULL`);
        await queryRunner.query(`COMMENT ON COLUMN "bend_center_to_face"."bendType" IS NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "last_active_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "last_active_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ALTER COLUMN "is_revoked" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP COLUMN "client_ip"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD "client_ip" character varying(45) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP CONSTRAINT "UQ_217b3c792fd4140ae675a0c08df"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" DROP COLUMN "session_token"`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD "session_token" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD CONSTRAINT "admin_sessions_session_token_key" UNIQUE ("session_token")`);
        await queryRunner.query(`CREATE TYPE "public"."audit_action_enum_old" AS ENUM('create', 'update', 'delete', 'upload', 'download', 'submit', 'approve', 'reject', 'request_changes', 'assign_reviewer', 'add_comment', 'resolve_comment', 'admin_login_failed', 'admin_login_success', 'admin_logout', 'user_created', 'user_updated', 'user_deactivated', 'user_reactivated')`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ALTER COLUMN "action" TYPE "public"."audit_action_enum_old" USING "action"::"text"::"public"."audit_action_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."audit_logs_action_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."audit_action_enum_old" RENAME TO "audit_action_enum"`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ALTER COLUMN "entity_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_invitation_status_enum_old" AS ENUM('pending', 'accepted', 'expired', 'cancelled')`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" TYPE "public"."supplier_invitation_status_enum_old" USING "status"::"text"::"public"."supplier_invitation_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ALTER COLUMN "status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_invitations_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_invitation_status_enum_old" RENAME TO "supplier_invitation_status_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP CONSTRAINT "UQ_6e17329953ae78fccc11a73af34"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP COLUMN "token"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD "token" character varying(500) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "supplier_invitations_token_key" UNIQUE ("token")`);
        await queryRunner.query(`CREATE TYPE "public"."session_invalidation_reason_enum_old" AS ENUM('logout', 'new_login', 'expired', 'admin_reset', 'device_reset', 'account_suspended')`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" ALTER COLUMN "invalidation_reason" TYPE "public"."session_invalidation_reason_enum_old" USING "invalidation_reason"::"text"::"public"."session_invalidation_reason_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."customer_sessions_invalidation_reason_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."session_invalidation_reason_enum_old" RENAME TO "session_invalidation_reason_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_account_status_enum_old" AS ENUM('pending', 'active', 'suspended', 'deactivated')`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" TYPE "public"."customer_account_status_enum_old" USING "account_status"::"text"::"public"."customer_account_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "account_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."customer_profiles_account_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_account_status_enum_old" RENAME TO "customer_account_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_role_enum_old" AS ENUM('customer_admin', 'customer_standard')`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" TYPE "public"."customer_role_enum_old" USING "role"::"text"::"public"."customer_role_enum_old"`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ALTER COLUMN "role" SET DEFAULT 'customer_admin'`);
        await queryRunner.query(`DROP TYPE "public"."customer_profiles_role_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_role_enum_old" RENAME TO "customer_role_enum"`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_failed" IS 'Whether OCR processing failed'`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_processed_at" IS 'Timestamp when OCR processing was performed'`);
        await queryRunner.query(`COMMENT ON COLUMN "customer_documents"."ocr_extracted_data" IS 'Extracted data from OCR processing (VAT number, registration number, company name, etc.)'`);
        await queryRunner.query(`CREATE TYPE "public"."customer_document_validation_status_enum_old" AS ENUM('pending', 'valid', 'invalid', 'failed', 'manual_review')`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" TYPE "public"."customer_document_validation_status_enum_old" USING "validation_status"::"text"::"public"."customer_document_validation_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "validation_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."customer_documents_validation_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_document_validation_status_enum_old" RENAME TO "customer_document_validation_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."customer_document_type_enum_old" AS ENUM('registration_cert', 'tax_clearance', 'bee_cert', 'insurance', 'proof_of_address', 'other')`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ALTER COLUMN "document_type" TYPE "public"."customer_document_type_enum_old" USING "document_type"::"text"::"public"."customer_document_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."customer_documents_document_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."customer_document_type_enum_old" RENAME TO "customer_document_type_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."risk_level_enum_old" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "lining_coating_rules" ALTER COLUMN "corrosion_level" TYPE "public"."risk_level_enum_old" USING "corrosion_level"::"text"::"public"."risk_level_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."lining_coating_rules_corrosion_level_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."risk_level_enum_old" RENAME TO "risk_level_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."risk_level_enum_old" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "lining_coating_rules" ALTER COLUMN "abrasion_level" TYPE "public"."risk_level_enum_old" USING "abrasion_level"::"text"::"public"."risk_level_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."lining_coating_rules_abrasion_level_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."risk_level_enum_old" RENAME TO "risk_level_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."risk_level_enum_old" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" TYPE "public"."risk_level_enum_old" USING "corrosion_risk"::"text"::"public"."risk_level_enum_old"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "corrosion_risk" SET DEFAULT 'Medium'`);
        await queryRunner.query(`DROP TYPE "public"."slurry_profiles_corrosion_risk_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."risk_level_enum_old" RENAME TO "risk_level_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."risk_level_enum_old" AS ENUM('Low', 'Medium', 'High', 'Very High')`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" TYPE "public"."risk_level_enum_old" USING "abrasion_risk"::"text"::"public"."risk_level_enum_old"`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ALTER COLUMN "abrasion_risk" SET DEFAULT 'Medium'`);
        await queryRunner.query(`DROP TYPE "public"."slurry_profiles_abrasion_risk_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."risk_level_enum_old" RENAME TO "risk_level_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."operational_status_enum_old" AS ENUM('Active', 'Care and Maintenance', 'Closed')`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" TYPE "public"."operational_status_enum_old" USING "operational_status"::"text"::"public"."operational_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "operational_status" SET DEFAULT 'Active'`);
        await queryRunner.query(`DROP TYPE "public"."sa_mines_operational_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."operational_status_enum_old" RENAME TO "operational_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."mine_type_enum_old" AS ENUM('Underground', 'Open Cast', 'Both')`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" TYPE "public"."mine_type_enum_old" USING "mine_type"::"text"::"public"."mine_type_enum_old"`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ALTER COLUMN "mine_type" SET DEFAULT 'Underground'`);
        await queryRunner.query(`DROP TYPE "public"."sa_mines_mine_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."mine_type_enum_old" RENAME TO "mine_type_enum"`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" ALTER COLUMN "source_standard" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" ALTER COLUMN "standard_code" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ALTER COLUMN "od_mm" TYPE numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ALTER COLUMN "od_inch" TYPE numeric(10,4)`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" DROP CONSTRAINT "UQ_b49ee2390bf098a5ed94cbd3d2e"`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" DROP COLUMN "nps"`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ADD "nps" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_nps_od" ADD CONSTRAINT "pipe_nps_od_nps_key" UNIQUE ("nps")`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ALTER COLUMN "wall_thickness_mm" TYPE numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ALTER COLUMN "wall_thickness_inch" TYPE numeric(10,4)`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP COLUMN "schedule"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD "schedule" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" DROP COLUMN "nps"`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD "nps" character varying(20) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ALTER COLUMN "allowable_stress_ksi" TYPE numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "equivalent_grade"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "equivalent_grade" character varying(100)`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "category"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "category" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP CONSTRAINT "UQ_b6799f7aed70897801673c40487"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "code"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "code" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD CONSTRAINT "pipe_steel_grades_code_key" UNIQUE ("code")`);
        await queryRunner.query(`ALTER TABLE "pvc_cement_prices" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_cement_prices" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_types" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_types" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_pipe_specifications" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_pipe_specifications" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_standards" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "pvc_standards" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "sabs62_fitting_dimension" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "sabs62_fitting_dimension" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."radius_r_mm" IS 'Radius R in mm (for sweep tees)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."centre_to_face_d_mm" IS 'Centre to face D in mm (for sweep tees)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."centre_to_face_c_mm" IS 'Centre to face C in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."dimension_b_mm" IS 'Dimension B in mm (for laterals/Y-pieces)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."dimension_a_mm" IS 'Dimension A in mm (for laterals/Y-pieces)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."angle_range" IS 'Angle range for laterals/Y-pieces: 60-90, 45-59, 30-44'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_d_mm" IS 'Outside diameter D in mm (for unequal/cross fittings)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_d_mm" IS 'Nominal diameter D in mm (for unequal/cross fittings)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_b_mm" IS 'Outside diameter B in mm (for unequal fittings)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_b_mm" IS 'Nominal diameter B in mm (for unequal fittings)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."outside_diameter_mm" IS 'Outside diameter in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."nominal_diameter_mm" IS 'Nominal diameter in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs62_fitting_dimension"."fitting_type" IS 'Type of fitting: EQUAL_TEE, UNEQUAL_TEE, LATERAL, SWEEP_TEE, UNEQUAL_CROSS, Y_PIECE, GUSSETTED_TEE, EQUAL_CROSS'`);
        await queryRunner.query(`ALTER TABLE "sabs719_fitting_dimension" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "sabs719_fitting_dimension" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."radius_r_mm" IS 'Radius R in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_h_mm" IS 'Dimension H in mm (for duckfoot height)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."thickness_t2_mm" IS 'Thickness T2 in mm (for duckfoot)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."thickness_t1_mm" IS 'Thickness T1 in mm (for duckfoot ribs)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_y_mm" IS 'Dimension Y in mm (for duckfoot)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_x_mm" IS 'Dimension X in mm (for duckfoot base)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_f_mm" IS 'Dimension F in mm (for sweeps and laterals)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_e_mm" IS 'Dimension E in mm (for sweeps and laterals)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_d_mm" IS 'Dimension D in mm (for sweeps and laterals)'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_c_mm" IS 'Dimension C in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_b_mm" IS 'Dimension B in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."dimension_a_mm" IS 'Dimension A in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."outside_diameter_mm" IS 'Outside diameter in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."nominal_diameter_mm" IS 'Nominal diameter in mm'`);
        await queryRunner.query(`COMMENT ON COLUMN "sabs719_fitting_dimension"."fitting_type" IS 'Type of fitting: ELBOW, MEDIUM_RADIUS_BEND, LONG_RADIUS_BEND, DUCKFOOT_SHORT, DUCKFOOT_GUSSETTED, SWEEP_LONG_RADIUS, SWEEP_MEDIUM_RADIUS, SWEEP_ELBOW, LATERAL'`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "display_order" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "stainless_multiplier" SET DEFAULT 1.5`);
        await queryRunner.query(`ALTER TABLE "fabrication_operations" ALTER COLUMN "stainless_multiplier" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "display_order" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "labor_multiplier" SET DEFAULT 1.0`);
        await queryRunner.query(`ALTER TABLE "fabrication_complexity_levels" ALTER COLUMN "labor_multiplier" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "updated_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "shop_labor_rates" ALTER COLUMN "currency" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "display_order" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_grades" ALTER COLUMN "compatible_types" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "display_order" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ALTER COLUMN "grades" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "created_at" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "is_active" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "structural_steel_types" ALTER COLUMN "display_order" DROP NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_session_invalidation_reason_enum_old" AS ENUM('logout', 'new_login', 'expired', 'admin_reset', 'device_reset', 'account_suspended')`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" ALTER COLUMN "invalidation_reason" TYPE "public"."supplier_session_invalidation_reason_enum_old" USING "invalidation_reason"::"text"::"public"."supplier_session_invalidation_reason_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_sessions_invalidation_reason_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_session_invalidation_reason_enum_old" RENAME TO "supplier_session_invalidation_reason_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_account_status_enum_old" AS ENUM('pending', 'active', 'suspended', 'deactivated')`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" TYPE "public"."supplier_account_status_enum_old" USING "account_status"::"text"::"public"."supplier_account_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ALTER COLUMN "account_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_profiles_account_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_account_status_enum_old" RENAME TO "supplier_account_status_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "updated_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "created_at" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP COLUMN "certifications"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_capabilities_certifications_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD "certifications" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" DROP COLUMN "material_specializations"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_capabilities_material_specializations_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD "material_specializations" text array NOT NULL DEFAULT '{}'`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_capabilities_product_category_enum_old" AS ENUM('straight_pipe', 'bends', 'flanges', 'fittings', 'valves', 'structural_steel', 'hdpe', 'fabrication', 'coating', 'inspection', 'other')`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ALTER COLUMN "product_category" TYPE "public"."supplier_capabilities_product_category_enum_old" USING "product_category"::"text"::"public"."supplier_capabilities_product_category_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_capabilities_product_category_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_capabilities_product_category_enum_old" RENAME TO "supplier_capabilities_product_category_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_document_validation_status_enum_old" AS ENUM('pending', 'valid', 'invalid', 'failed', 'manual_review')`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" TYPE "public"."supplier_document_validation_status_enum_old" USING "validation_status"::"text"::"public"."supplier_document_validation_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "validation_status" SET DEFAULT 'pending'`);
        await queryRunner.query(`DROP TYPE "public"."supplier_documents_validation_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_document_validation_status_enum_old" RENAME TO "supplier_document_validation_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_document_type_enum_old" AS ENUM('registration_cert', 'vat_cert', 'tax_clearance', 'bee_cert', 'iso_cert', 'insurance', 'other')`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ALTER COLUMN "document_type" TYPE "public"."supplier_document_type_enum_old" USING "document_type"::"text"::"public"."supplier_document_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_documents_document_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_document_type_enum_old" RENAME TO "supplier_document_type_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."supplier_login_failure_reason_enum_old" AS ENUM('invalid_credentials', 'device_mismatch', 'account_suspended', 'account_pending', 'account_deactivated', 'too_many_attempts', 'email_not_verified')`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" ALTER COLUMN "failure_reason" TYPE "public"."supplier_login_failure_reason_enum_old" USING "failure_reason"::"text"::"public"."supplier_login_failure_reason_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."supplier_login_attempts_failure_reason_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."supplier_login_failure_reason_enum_old" RENAME TO "supplier_login_failure_reason_enum"`);
        await queryRunner.query(`ALTER TABLE "supplier_companies" ALTER COLUMN "operational_regions" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "submitted_by_user_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."review_status_enum_old" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "previous_status" TYPE "public"."review_status_enum_old" USING "previous_status"::"text"::"public"."review_status_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."review_workflows_previous_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."review_status_enum_old" RENAME TO "review_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."review_status_enum_old" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" TYPE "public"."review_status_enum_old" USING "current_status"::"text"::"public"."review_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "current_status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."review_workflows_current_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."review_status_enum_old" RENAME TO "review_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."review_entity_type_enum_old" AS ENUM('drawing', 'boq', 'rfq')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "entity_type" TYPE "public"."review_entity_type_enum_old" USING "entity_type"::"text"::"public"."review_entity_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."review_workflows_entity_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."review_entity_type_enum_old" RENAME TO "review_entity_type_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."workflow_type_enum_old" AS ENUM('drawing_review', 'boq_review', 'rfq_review')`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ALTER COLUMN "workflow_type" TYPE "public"."workflow_type_enum_old" USING "workflow_type"::"text"::"public"."workflow_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."review_workflows_workflow_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."workflow_type_enum_old" RENAME TO "workflow_type_enum"`);
        await queryRunner.query(`ALTER TABLE "user" ALTER COLUMN "status" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "user" ALTER COLUMN "salt" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."rfqs_status_enum_old" AS ENUM('draft', 'submitted', 'in_review', 'quoted', 'accepted', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" TYPE "public"."rfqs_status_enum_old" USING "status"::"text"::"public"."rfqs_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."rfqs_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."rfqs_status_enum_old" RENAME TO "rfqs_status_enum"`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_phone"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_phone" character varying(50)`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_email"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_email" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "customer_name"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "customer_name" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "description" character varying(500)`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "project_name"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "project_name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP CONSTRAINT "UQ_b19e346f96ffd54c4d436a95869"`);
        await queryRunner.query(`ALTER TABLE "rfqs" DROP COLUMN "rfq_number"`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD "rfq_number" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfqs" ADD CONSTRAINT "UQ_b19e346f96ffd54c4d436a95869" UNIQUE ("rfq_number")`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "created_by_user_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."boq_status_enum_old" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" TYPE "public"."boq_status_enum_old" USING "status"::"text"::"public"."boq_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "boqs" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."boqs_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."boq_status_enum_old" RENAME TO "boq_status_enum"`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ALTER COLUMN "boq_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."boq_item_type_enum_old" AS ENUM('straight_pipe', 'bend', 'fitting', 'flange', 'valve', 'support', 'coating', 'lining', 'custom')`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ALTER COLUMN "item_type" TYPE "public"."boq_item_type_enum_old" USING "item_type"::"text"::"public"."boq_item_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."boq_line_items_item_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."boq_item_type_enum_old" RENAME TO "boq_item_type_enum"`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "uploaded_by_user_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."drawing_status_enum_old" AS ENUM('draft', 'submitted', 'under_review', 'changes_requested', 'approved', 'rejected')`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" TYPE "public"."drawing_status_enum_old" USING "status"::"text"::"public"."drawing_status_enum_old"`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "status" SET DEFAULT 'draft'`);
        await queryRunner.query(`DROP TYPE "public"."drawings_status_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."drawing_status_enum_old" RENAME TO "drawing_status_enum"`);
        await queryRunner.query(`CREATE TYPE "public"."drawing_file_type_enum_old" AS ENUM('pdf', 'dwg', 'dxf', 'png', 'jpg', 'jpeg')`);
        await queryRunner.query(`ALTER TABLE "drawings" ALTER COLUMN "file_type" TYPE "public"."drawing_file_type_enum_old" USING "file_type"::"text"::"public"."drawing_file_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."drawings_file_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."drawing_file_type_enum_old" RENAME TO "drawing_file_type_enum"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "user_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "drawing_id" SET NOT NULL`);
        await queryRunner.query(`CREATE TYPE "public"."comment_type_enum_old" AS ENUM('general', 'annotation', 'review_note', 'change_request', 'approval_note')`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" TYPE "public"."comment_type_enum_old" USING "comment_type"::"text"::"public"."comment_type_enum_old"`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ALTER COLUMN "comment_type" SET DEFAULT 'general'`);
        await queryRunner.query(`DROP TYPE "public"."drawing_comments_comment_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."comment_type_enum_old" RENAME TO "comment_type_enum"`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ALTER COLUMN "uploaded_by_user_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ALTER COLUMN "drawing_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ALTER COLUMN "rfq_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "mime_type"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "mime_type" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "file_path"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "file_path" character varying(500) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" DROP COLUMN "filename"`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD "filename" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "rfq_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "unit_price" TYPE numeric(10,2)`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "total_weight_kg" TYPE numeric(10,3)`);
        await queryRunner.query(`CREATE TYPE "public"."rfq_items_item_type_enum_old" AS ENUM('straight_pipe', 'bend_with_tangent', 'lateral_with_brackets', 'bend')`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ALTER COLUMN "item_type" TYPE "public"."rfq_items_item_type_enum_old" USING "item_type"::"text"::"public"."rfq_items_item_type_enum_old"`);
        await queryRunner.query(`DROP TYPE "public"."rfq_items_item_type_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."rfq_items_item_type_enum_old" RENAME TO "rfq_items_item_type_enum"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" DROP COLUMN "description"`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD "description" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD CONSTRAINT "FK_ef8f022c5f4d9e27e47e03a1202" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP CONSTRAINT "UQ_84197f8946daca8330b5d4e0e9d"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "rfq_item_id" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "calculated_total_length" TYPE numeric(12,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "total_pipe_weight" TYPE numeric(12,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "quantity_value" TYPE numeric(12,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "length_unit" SET DEFAULT 'meters'`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ALTER COLUMN "individual_pipe_length" TYPE numeric(10,3)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "pipe_end_configuration"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "pipe_end_configuration" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" DROP COLUMN "schedule_number"`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "schedule_number" character varying(20)`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "FK_84197f8946daca8330b5d4e0e9d" FOREIGN KEY ("rfq_item_id") REFERENCES "rfq_items"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" DROP COLUMN "invited_by"`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" DROP COLUMN "bolt_length_rf"`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD "invited_by_id" integer NOT NULL`);
        await queryRunner.query(`ALTER TABLE "pipe_steel_grades" ADD "created_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "rfq_items" ADD "created_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "updated_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "created_at" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "flange_pressure_class_id" integer`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "flange_standard_id" integer`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD "nominal_outside_diameter_id" integer`);
        await queryRunner.query(`ALTER TABLE "steel_specifications" ADD "grade_standard" character varying(100)`);
        await queryRunner.query(`ALTER TABLE "steel_specifications" ADD "description" text`);
        await queryRunner.query(`ALTER TABLE "steel_specifications" ADD "density_kg_m3" numeric(8,2) NOT NULL DEFAULT '7850'`);
        await queryRunner.query(`DROP INDEX "public"."IDX_5d40d7385a0134f48786697e22"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_f3376c4ecd3f9fcf45d5ba6478"`);
        await queryRunner.query(`DROP TABLE "customer_login_attempts"`);
        await queryRunner.query(`DROP TYPE "public"."customer_login_attempts_failure_reason_enum"`);
        await queryRunner.query(`DROP TABLE "rfq_drafts"`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" RENAME COLUMN "added_by" TO "added_by_id"`);
        await queryRunner.query(`ALTER TABLE "coating_environments" ADD CONSTRAINT "UQ_coating_env_standard_category" UNIQUE ("standard_id", "category")`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" ADD CONSTRAINT "UQ_flange_bolting_standard_class_nps" UNIQUE ("standard_id", "pressure_class", "nps")`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" ADD CONSTRAINT "UQ_flange_pt_ratings_class_material_temp" UNIQUE ("pressure_class_id", "material_group", "temperature_celsius")`);
        await queryRunner.query(`ALTER TABLE "hdpe_pipe_specifications" ADD CONSTRAINT "UQ_hdpe_pipe_nb_sdr" UNIQUE ("nominal_bore", "sdr")`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" ADD CONSTRAINT "UQ_hdpe_fitting_weights" UNIQUE ("fitting_type_id", "nominal_bore")`);
        await queryRunner.query(`ALTER TABLE "material_allowable_stresses" ADD CONSTRAINT "UQ_material_stress_temp" UNIQUE ("material_code", "temperature_celsius")`);
        await queryRunner.query(`ALTER TABLE "pipe_schedules" ADD CONSTRAINT "UQ_pipe_schedules_nps_schedule" UNIQUE ("nps", "schedule")`);
        await queryRunner.query(`ALTER TABLE "pipe_schedule_walls" ADD CONSTRAINT "pipe_schedule_walls_nps_schedule_key" UNIQUE ("nps", "schedule")`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ADD CONSTRAINT "pipe_allowable_stresses_grade_id_temperature_f_key" UNIQUE ("grade_id", "temperature_f")`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ADD CONSTRAINT "structural_steel_sections_type_id_designation_key" UNIQUE ("type_id", "designation")`);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_bend_center_to_face_unique" ON "bend_center_to_face" ("bendType", "nominalBoreMm", "degrees") `);
        await queryRunner.query(`CREATE INDEX "IDX_preferred_suppliers_active" ON "customer_preferred_suppliers" ("customer_company_id", "is_active") `);
        await queryRunner.query(`CREATE INDEX "IDX_preferred_suppliers_company" ON "customer_preferred_suppliers" ("customer_company_id") `);
        await queryRunner.query(`CREATE INDEX "idx_admin_session_expires_at" ON "admin_sessions" ("expires_at") `);
        await queryRunner.query(`CREATE INDEX "idx_admin_session_user_id" ON "admin_sessions" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "idx_admin_session_token" ON "admin_sessions" ("session_token") `);
        await queryRunner.query(`CREATE INDEX "IDX_audit_logs_action" ON "audit_logs" ("action") `);
        await queryRunner.query(`CREATE INDEX "IDX_audit_logs_performed_by" ON "audit_logs" ("performed_by_user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_audit_logs_timestamp" ON "audit_logs" ("timestamp") `);
        await queryRunner.query(`CREATE INDEX "IDX_audit_logs_entity" ON "audit_logs" ("entity_type", "entity_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_invitations_company" ON "supplier_invitations" ("customer_company_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_invitations_email_status" ON "supplier_invitations" ("email", "status") `);
        await queryRunner.query(`CREATE INDEX "IDX_invitations_token" ON "supplier_invitations" ("token") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_sessions_profile_active" ON "customer_sessions" ("customer_profile_id", "is_active") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_customer_sessions_token" ON "customer_sessions" ("session_token") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_profiles_email_verified" ON "customer_profiles" ("email_verified") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_profiles_role" ON "customer_profiles" ("role") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_documents_status" ON "customer_documents" ("validation_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_documents_type" ON "customer_documents" ("document_type") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_documents_customer" ON "customer_documents" ("customer_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_onboarding_customer" ON "customer_onboarding" ("customer_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_onboarding_status" ON "customer_onboarding" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_device_bindings_device_fingerprint" ON "customer_device_bindings" ("device_fingerprint") `);
        await queryRunner.query(`CREATE INDEX "IDX_customer_device_bindings_customer_profile" ON "customer_device_bindings" ("customer_profile_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_pipe_specifications_active" ON "hdpe_pipe_specifications" ("is_active") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_pipe_specifications_sdr" ON "hdpe_pipe_specifications" ("sdr") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_pipe_specifications_nb" ON "hdpe_pipe_specifications" ("nominal_bore") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_fitting_weights_nb" ON "hdpe_fitting_weights" ("nominal_bore") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_fitting_types_category" ON "hdpe_fitting_types" ("category") `);
        await queryRunner.query(`CREATE INDEX "IDX_hdpe_fitting_types_code" ON "hdpe_fitting_types" ("code") `);
        await queryRunner.query(`CREATE INDEX "IDX_sa_mines_commodity" ON "sa_mines" ("commodity_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_sa_mines_status" ON "sa_mines" ("operational_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_sa_mines_province" ON "sa_mines" ("province") `);
        await queryRunner.query(`CREATE INDEX "IDX_pvc_pipe_specs_pn" ON "pvc_pipe_specifications" ("pressure_rating") `);
        await queryRunner.query(`CREATE INDEX "IDX_pvc_pipe_specs_dn" ON "pvc_pipe_specifications" ("nominal_diameter") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs62_fitting_lookup" ON "sabs62_fitting_dimension" ("fitting_type", "nominal_diameter_mm", "angle_range") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs62_nominal_diameter" ON "sabs62_fitting_dimension" ("nominal_diameter_mm") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs62_fitting_type" ON "sabs62_fitting_dimension" ("fitting_type") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs719_fitting_lookup" ON "sabs719_fitting_dimension" ("fitting_type", "nominal_diameter_mm") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs719_nominal_diameter" ON "sabs719_fitting_dimension" ("nominal_diameter_mm") `);
        await queryRunner.query(`CREATE INDEX "IDX_sabs719_fitting_type" ON "sabs719_fitting_dimension" ("fitting_type") `);
        await queryRunner.query(`CREATE INDEX "idx_fab_operations_code" ON "fabrication_operations" ("code") `);
        await queryRunner.query(`CREATE INDEX "idx_fab_operations_active" ON "fabrication_operations" ("is_active") `);
        await queryRunner.query(`CREATE INDEX "idx_fab_complexity_level" ON "fabrication_complexity_levels" ("level") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_rates_active" ON "shop_labor_rates" ("is_active") `);
        await queryRunner.query(`CREATE INDEX "idx_labor_rates_code" ON "shop_labor_rates" ("code") `);
        await queryRunner.query(`CREATE INDEX "idx_sections_designation" ON "structural_steel_sections" ("designation") `);
        await queryRunner.query(`CREATE INDEX "idx_sections_type_id" ON "structural_steel_sections" ("type_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_sessions_active" ON "supplier_sessions" ("supplier_profile_id", "is_active") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_sessions_token" ON "supplier_sessions" ("session_token") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_profiles_status" ON "supplier_profiles" ("account_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_profiles_company" ON "supplier_profiles" ("company_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_profiles_user" ON "supplier_profiles" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "idx_supplier_capabilities_category" ON "supplier_capabilities" ("product_category") `);
        await queryRunner.query(`CREATE INDEX "idx_supplier_capabilities_profile_id" ON "supplier_capabilities" ("supplier_profile_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_documents_type" ON "supplier_documents" ("document_type") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_documents_supplier" ON "supplier_documents" ("supplier_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_onboarding_status" ON "supplier_onboarding" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_login_attempts_profile" ON "supplier_login_attempts" ("supplier_profile_id", "attempt_time") `);
        await queryRunner.query(`CREATE INDEX "IDX_supplier_login_attempts_email" ON "supplier_login_attempts" ("email", "attempt_time") `);
        await queryRunner.query(`CREATE INDEX "IDX_review_workflows_is_active" ON "review_workflows" ("is_active") `);
        await queryRunner.query(`CREATE INDEX "IDX_review_workflows_assigned_reviewer" ON "review_workflows" ("assigned_reviewer_user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_review_workflows_submitted_by" ON "review_workflows" ("submitted_by_user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_review_workflows_status" ON "review_workflows" ("current_status") `);
        await queryRunner.query(`CREATE INDEX "IDX_review_workflows_entity" ON "review_workflows" ("entity_type", "entity_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_boqs_created_by" ON "boqs" ("created_by_user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_boqs_status" ON "boqs" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_boqs_rfq_id" ON "boqs" ("rfq_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_boqs_drawing_id" ON "boqs" ("drawing_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_boq_line_items_item_type" ON "boq_line_items" ("item_type") `);
        await queryRunner.query(`CREATE INDEX "IDX_boq_line_items_boq_id" ON "boq_line_items" ("boq_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawings_uploaded_by" ON "drawings" ("uploaded_by_user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawings_status" ON "drawings" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawings_rfq_id" ON "drawings" ("rfq_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawing_comments_user_id" ON "drawing_comments" ("user_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawing_comments_drawing_id" ON "drawing_comments" ("drawing_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_drawing_versions_drawing_id" ON "drawing_versions" ("drawing_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_rfq_documents_created_at" ON "rfq_documents" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_rfq_documents_rfq_id" ON "rfq_documents" ("rfq_id") `);
        await queryRunner.query(`ALTER TABLE "coating_specifications" ADD CONSTRAINT "FK_coating_spec_env" FOREIGN KEY ("environment_id") REFERENCES "coating_environments"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "coating_environments" ADD CONSTRAINT "FK_coating_env_standard" FOREIGN KEY ("standard_id") REFERENCES "coating_standards"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_preferred_suppliers_company" FOREIGN KEY ("customer_company_id") REFERENCES "customer_companies"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_preferred_suppliers_supplier" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_preferred_suppliers" ADD CONSTRAINT "FK_preferred_suppliers_added_by" FOREIGN KEY ("added_by_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin_sessions" ADD CONSTRAINT "fk_admin_session_user" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "audit_logs" ADD CONSTRAINT "FK_audit_logs_performed_by" FOREIGN KEY ("performed_by_user_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_invitations_company" FOREIGN KEY ("customer_company_id") REFERENCES "customer_companies"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_invitations_invited_by" FOREIGN KEY ("invited_by_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_invitations" ADD CONSTRAINT "FK_invitations_supplier" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_sessions" ADD CONSTRAINT "FK_customer_sessions_profile" FOREIGN KEY ("customer_profile_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ADD CONSTRAINT "FK_customer_profiles_user" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_profiles" ADD CONSTRAINT "FK_customer_profiles_company" FOREIGN KEY ("company_id") REFERENCES "customer_companies"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ADD CONSTRAINT "FK_customer_documents_customer" FOREIGN KEY ("customer_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_documents" ADD CONSTRAINT "FK_customer_documents_reviewed_by" FOREIGN KEY ("reviewed_by_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" ADD CONSTRAINT "FK_customer_onboarding_customer" FOREIGN KEY ("customer_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_onboarding" ADD CONSTRAINT "FK_customer_onboarding_reviewed_by" FOREIGN KEY ("reviewed_by_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "customer_device_bindings" ADD CONSTRAINT "FK_customer_device_bindings_customer_profile" FOREIGN KEY ("customer_profile_id") REFERENCES "customer_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "flange_bolting" ADD CONSTRAINT "FK_flange_bolting_standard" FOREIGN KEY ("standard_id") REFERENCES "flange_standards"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "flange_pt_ratings" ADD CONSTRAINT "FK_flange_pt_ratings_pressure_class" FOREIGN KEY ("pressure_class_id") REFERENCES "flange_pressure_classes"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "hdpe_fitting_weights" ADD CONSTRAINT "FK_hdpe_fitting_weights_fitting_type" FOREIGN KEY ("fitting_type_id") REFERENCES "hdpe_fitting_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "slurry_profiles" ADD CONSTRAINT "FK_slurry_profiles_commodity" FOREIGN KEY ("commodity_id") REFERENCES "commodities"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "sa_mines" ADD CONSTRAINT "FK_sa_mines_commodity" FOREIGN KEY ("commodity_id") REFERENCES "commodities"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pipe_end_configurations" ADD CONSTRAINT "FK_pipe_end_configurations_weld_type" FOREIGN KEY ("weld_type_id") REFERENCES "weld_types"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pipe_allowable_stresses" ADD CONSTRAINT "pipe_allowable_stresses_grade_id_fkey" FOREIGN KEY ("grade_id") REFERENCES "pipe_steel_grades"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "pvc_fitting_weights" ADD CONSTRAINT "FK_pvc_fitting_weights_type" FOREIGN KEY ("fitting_type_id") REFERENCES "pvc_fitting_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "structural_steel_sections" ADD CONSTRAINT "structural_steel_sections_type_id_fkey" FOREIGN KEY ("type_id") REFERENCES "structural_steel_types"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_sessions" ADD CONSTRAINT "FK_supplier_sessions_profile" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ADD CONSTRAINT "FK_supplier_profiles_user" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_profiles" ADD CONSTRAINT "FK_supplier_profiles_company" FOREIGN KEY ("company_id") REFERENCES "supplier_companies"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_capabilities" ADD CONSTRAINT "FK_9131cff65b8cb36fc5ac3226dfc" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ADD CONSTRAINT "FK_supplier_documents_supplier" FOREIGN KEY ("supplier_id") REFERENCES "supplier_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_documents" ADD CONSTRAINT "FK_supplier_documents_reviewed_by" FOREIGN KEY ("reviewed_by") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" ADD CONSTRAINT "FK_supplier_onboarding_supplier" FOREIGN KEY ("supplier_id") REFERENCES "supplier_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_onboarding" ADD CONSTRAINT "FK_supplier_onboarding_reviewed_by" FOREIGN KEY ("reviewed_by") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_login_attempts" ADD CONSTRAINT "FK_supplier_login_attempts_profile" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "supplier_device_bindings" ADD CONSTRAINT "FK_supplier_device_bindings_profile" FOREIGN KEY ("supplier_profile_id") REFERENCES "supplier_profiles"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_review_workflows_submitted_by" FOREIGN KEY ("submitted_by_user_id") REFERENCES "user"("id") ON DELETE RESTRICT ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_review_workflows_assigned_reviewer" FOREIGN KEY ("assigned_reviewer_user_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review_workflows" ADD CONSTRAINT "FK_review_workflows_decided_by" FOREIGN KEY ("decided_by_user_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_boqs_drawing" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_boqs_rfq" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boqs" ADD CONSTRAINT "FK_boqs_created_by" FOREIGN KEY ("created_by_user_id") REFERENCES "user"("id") ON DELETE RESTRICT ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "boq_line_items" ADD CONSTRAINT "FK_boq_line_items_boq" FOREIGN KEY ("boq_id") REFERENCES "boqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawings" ADD CONSTRAINT "FK_drawings_rfq" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawings" ADD CONSTRAINT "FK_drawings_uploaded_by" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE RESTRICT ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_drawing_comments_drawing" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_drawing_comments_user" FOREIGN KEY ("user_id") REFERENCES "user"("id") ON DELETE RESTRICT ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_comments" ADD CONSTRAINT "FK_drawing_comments_parent" FOREIGN KEY ("parent_comment_id") REFERENCES "drawing_comments"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ADD CONSTRAINT "FK_drawing_versions_drawing" FOREIGN KEY ("drawing_id") REFERENCES "drawings"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "drawing_versions" ADD CONSTRAINT "FK_drawing_versions_uploaded_by" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE RESTRICT ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD CONSTRAINT "FK_rfq_documents_rfq" FOREIGN KEY ("rfq_id") REFERENCES "rfqs"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "rfq_documents" ADD CONSTRAINT "FK_rfq_documents_uploaded_by" FOREIGN KEY ("uploaded_by_user_id") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "bend_rfqs" ADD CONSTRAINT "FK_cd439a37b8b2bc118e33004885" FOREIGN KEY ("rfq_item_id") REFERENCES "rfq_items"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "FK_cdb1303cca0319445b043c6cd51" FOREIGN KEY ("nominal_outside_diameter_id") REFERENCES "nominal_outside_diameters"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "FK_ee07a21b00b3fd775d3b16da49b" FOREIGN KEY ("flange_standard_id") REFERENCES "flange_standards"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "straight_pipe_rfqs" ADD CONSTRAINT "FK_d8a6b6d0a82086e9f9150a9e9dd" FOREIGN KEY ("flange_pressure_class_id") REFERENCES "flange_pressure_classes"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

}
